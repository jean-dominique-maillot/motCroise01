<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CrossWord Master</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">

    <style>
        /* --- VARIABLES & RESET --- */
        /* --- VARIABLES & RESET --- */
        :root {
            --primary: #6366f1;
            --bg-gradient: linear-gradient(135deg, #0f172a 0%, #1e1b4b 100%);
            --glass: rgba(255, 255, 255, 0.05);
            --border: rgba(255, 255, 255, 0.1);
            --text: #f8fafc;
            --green: #22c55e;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: var(--bg-gradient);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
            padding-bottom: env(safe-area-inset-bottom);
        }

        /* --- STRUCTURE PRINCIPALE --- */
        .app-container {
            max-width: 1200px;
            width: 100%;
            margin: 0 auto;
            padding: 15px;
            padding-bottom: 250px;
            /* Espace clavier mobile */
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* --- HEADER --- */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            gap: 15px;
        }

        .logo h1 {
            font-size: 1.5rem;
            font-weight: 800;
        }

        .logo span {
            color: var(--primary);
            opacity: 0.8;
            font-weight: 300;
        }

        .stats-bar {
            display: flex;
            gap: 15px;
            font-size: 0.9rem;
            align-items: center;
            padding: 8px 15px;
            background: var(--glass);
            border: 1px solid var(--border);
            border-radius: 12px;
        }

        .xp-track {
            width: 80px;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
        }

        .xp-fill {
            height: 100%;
            background: var(--green);
            width: 0%;
            transition: width 0.5s;
        }

        .xp-details {
            font-size: 0.7rem;
            opacity: 0.8;
            text-align: right;
            font-family: monospace;
            min-width: 80px;
        }

        @media (max-width: 600px) {
            header {
                flex-direction: column;
                align-items: stretch;
                text-align: center;
            }

            .stats-bar {
                justify-content: space-between;
            }
        }

        /* --- UI COMMON --- */
        .glass-panel {
            background: var(--glass);
            backdrop-filter: blur(12px);
            border: 1px solid var(--border);
            border-radius: 16px;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
        }

        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 10px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            min-height: 44px;
            transition: transform 0.1s;
        }

        .btn:active {
            transform: scale(0.95);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
        }

        .btn-share {
            background: var(--green);
        }

        .btn-danger {
            background: #ef4444;
            /* Rouge vif */
            color: white;
            box-shadow: 0 4px 15px rgba(239, 68, 68, 0.4);
        }

        .btn-danger:hover {
            background: #dc2626;
            transform: translateY(-2px);
        }

        /* Style pour le bouton D√©fi valid√© */
        .menu-btn.completed {
            background: rgba(34, 197, 94, 0.2);
            /* Vert transparent */
            border: 1px solid var(--green);
            color: var(--green);
            pointer-events: none;
            /* Optionnel : emp√™che de rejouer si tu veux bloquer */
            opacity: 0.8;
        }

        .menu-btn.completed h3 {
            color: var(--green);
        }

        /* --- MENU --- */
        .screen {
            display: none;
            animation: fadeIn 0.3s;
        }

        .screen.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .menu-box {
            max-width: 600px;
            margin: 20px auto;
            padding: 25px;
            text-align: center;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .menu-btn {
            padding: 20px;
            text-align: left;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border);
            border-radius: 12px;
            display: flex;
            align-items: center;
            gap: 15px;
            color: white;
            cursor: pointer;
            transition: 0.2s;
        }

        .menu-btn:hover {
            background: var(--primary);
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .menu-icon {
            font-size: 2rem;
        }

        /* Custom Selectors */
        .theme-picker {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 15px auto;
            padding: 8px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 50px;
            width: fit-content;
        }

        .theme-dot {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid rgba(255, 255, 255, 0.2);
            position: relative;
            transition: 0.3s;
        }

        .theme-dot.active {
            border-color: white;
            transform: scale(1.1);
            box-shadow: 0 0 10px var(--primary);
        }

        .theme-dot.active::after {
            content: '‚úì';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 0.7rem;
        }

        .theme-selector {
            display: flex;
            gap: 10px;
            overflow-x: auto;
            padding: 10px 0;
            -webkit-overflow-scrolling: touch;
        }

        .theme-chip {
            padding: 8px 16px;
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--border);
            cursor: pointer;
            white-space: nowrap;
            flex-shrink: 0;
        }

        .theme-chip.active {
            background: var(--primary);
            border-color: var(--primary);
            font-weight: bold;
        }

        .diff-selector {
            display: flex;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 50px;
            padding: 4px;
            margin: 15px auto;
            width: fit-content;
        }

        .diff-btn {
            padding: 8px 20px;
            border-radius: 40px;
            cursor: pointer;
            font-size: 0.9rem;
            opacity: 0.7;
        }

        .diff-btn.active {
            background: var(--primary);
            color: white;
            opacity: 1;
            font-weight: bold;
        }

        /* --- JEU & GRILLE (VERSION MOBILE CORRIG√âE) --- */
        .game-layout {
            display: flex;
            flex-direction: column;
            gap: 20px;
            width: 100%;
        }

        @media (min-width: 900px) {
            .game-layout {
                flex-direction: row;
                align-items: start;
                height: calc(100vh - 140px);
            }

            .grid-wrapper {
                flex: 2;
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .defs-panel {
                flex: 1;
                height: 100%;
            }
        }

        .grid-wrapper {
            width: 100%;
            overflow: auto;
            -webkit-overflow-scrolling: touch;
            padding: 0;
            padding-bottom: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
        }

        @media (max-width: 600px) {
            .grid-wrapper {
                display: block;
                justify-content: flex-start;
            }

            /* Permet scroll horizontal natif */
        }

        .crossword-grid {
            display: grid;
            /* On enl√®ve gap et background qui causaient le probl√®me */
            gap: 0;
            background: transparent;

            /* On cr√©e le cadre ext√©rieur (Haut et Gauche) */
            border: 2px solid #475569;

            /* Responsive sizing */
            min-width: 350px;
            max-width: 600px;
            margin: 0 auto;

            /* Pour √©viter tout d√©passement d'ombre */
            box-shadow: none;
        }

        @media (min-width: 600px) {
            .crossword-grid {
                width: 100%;
                min-width: auto;
            }
        }

        .cell-container {
            position: relative;
            background: white;
            width: 100%;
            aspect-ratio: 1 / 1;

            /* CHAQUE CELLULE DESSINE SES BORDS DROIT ET BAS */
            border-right: 1px solid #475569;
            border-bottom: 1px solid #475569;
        }

        /* Cas particulier : Case noire (blocked) */
        .cell-container.blocked {
            background: #0f172a;
            /* Fond sombre */
            /* On garde les bordures pour la structure, ou on les change si on veut fondre */
            border-color: #1e293b;
        }

        .cell {
            width: 100%;
            height: 100%;
            border: none;
            background: white;
            text-align: center;
            font-weight: 800;
            color: #1e293b;
            padding: 0;
            margin: 0;
            font-size: 14px;
            /* Fixe sur mobile pour √©viter zoom */
            position: relative;
            z-index: 1;
            text-transform: uppercase;
        }

        @media (min-width: 600px) {
            .cell {
                font-size: clamp(12px, 2.5vw, 22px);
            }
        }

        .cell:focus {
            background: #e0e7ff;
            outline: none;
        }

        .cell.correct {
            background: #dcfce7;
        }

        .cell.incorrect {
            background: #fee2e2;
            color: #ef4444;
        }

        .word-completed {
            animation: pop 0.4s ease;
            background: #86efac !important;
        }

        .cell-number {
            position: absolute;
            top: 1px;
            left: 1px;
            font-size: 9px;
            color: var(--primary);
            font-weight: 900;
            z-index: 5;
            pointer-events: none;
        }

        /* --- BULLE STICKY (MOBILE) --- */
        .active-clue-bar {
            position: sticky;
            top: 0;
            z-index: 100;
            background: var(--primary);
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            font-weight: 600;
            font-size: 0.95rem;
            display: none;
            animation: slideDown 0.3s ease;
        }

        .active-clue-bar.visible {
            display: block;
        }

        @keyframes slideDown {
            from {
                transform: translateY(-10px);
                opacity: 0;
            }

            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* --- D√âFINITIONS (PC) --- */
        .defs-panel {
            display: flex;
            flex-direction: column;
            max-height: 300px;
        }

        @media (min-width: 900px) {
            .defs-panel {
                max-height: 100%;
            }
        }

        .defs-tabs {
            display: flex;
            border-bottom: 1px solid var(--border);
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            opacity: 0.5;
            background: rgba(0, 0, 0, 0.2);
        }

        .tab.active {
            opacity: 1;
            background: transparent;
            border-bottom: 2px solid var(--primary);
            color: var(--primary);
            font-weight: bold;
        }

        .def-list {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
        }

        .def-item {
            padding: 12px;
            background: rgba(255, 255, 255, 0.03);
            margin-bottom: 6px;
            border-radius: 8px;
            font-size: 0.9rem;
            cursor: pointer;
            border-left: 3px solid transparent;
        }

        .def-item.highlight {
            background: rgba(99, 102, 241, 0.2);
            border-left-color: var(--primary);
        }

        /* --- CLAVIER VIRTUEL --- */
        .keyboard-container {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(15, 23, 42, 0.98);
            backdrop-filter: blur(10px);
            border-top: 1px solid var(--border);
            padding: 5px;
            z-index: 1000;
            padding-bottom: max(10px, env(safe-area-inset-bottom));
            display: none;
        }

        @media (max-width: 900px) {
            .keyboard-container {
                display: block;
            }
        }

        .kb-row {
            display: flex;
            justify-content: center;
            gap: 3px;
            margin-bottom: 4px;
        }

        .kb-key {
            flex: 1;
            height: 44px;
            max-width: 10%;
            background: rgba(255, 255, 255, 0.15);
            border: none;
            border-radius: 6px;
            color: white;
            font-size: 1.1rem;
            font-weight: bold;
            touch-action: manipulation;
        }

        .kb-key:active {
            background: var(--primary);
            transform: scale(0.95);
        }

        .kb-key.wide {
            max-width: 15%;
            font-size: 0.9rem;
        }

        /* --- SUCC√àS (DESIGN METAL & PAILLETTES) --- */
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }

        .stat-box {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-val {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary);
            display: block;
        }

        .achievements-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 15px;
            max-height: 400px;
            overflow-y: auto;
            padding: 15px;
        }

        .achievement-card {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 12px;
            border: 1px solid var(--border);
            display: flex;
            gap: 15px;
            align-items: center;
            opacity: 0.6;
            filter: grayscale(1);
            transition: 0.3s;
            position: relative;
            overflow: hidden;
        }

        .achievement-card .ach-icon,
        .achievement-card .ach-info,
        .achievement-card div:last-child {
            position: relative;
            z-index: 2;
        }

        /* UNLOCKED */
        .achievement-card.unlocked {
            opacity: 1;
            filter: grayscale(0);
            transform: scale(1.02);
            border: 2px solid white;
            color: #000;
            text-shadow: 0 1px 0 rgba(255, 255, 255, 0.4);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
        }

        .achievement-card.unlocked h4 {
            margin: 0;
            font-weight: 900;
            color: #000;
        }

        .achievement-card.unlocked p {
            margin: 0;
            font-size: 0.85rem;
            font-weight: 700;
            color: #333;
        }

        /* PAILLETTES */
        .achievement-card.unlocked::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            background-image: radial-gradient(circle, white 1px, transparent 1px), radial-gradient(circle, rgba(255, 255, 255, 0.8) 1px, transparent 1px);
            background-size: 30px 30px, 15px 15px;
            mix-blend-mode: overlay;
            opacity: 0.7;
            pointer-events: none;
            animation: sparkle-anim 3s infinite linear;
        }

        /* TIERS COULEURS */
        .achievement-card[data-tier="bronze"].unlocked {
            background-image: linear-gradient(45deg, #5D4037, #8D6E63, #D7CCC8, #8D6E63, #5D4037);
            background-size: 200% 200%;
            border-color: #D7CCC8;
            animation: metal-move 6s ease infinite;
        }

        .achievement-card[data-tier="silver"].unlocked {
            background-image: linear-gradient(45deg, #546E7A, #90A4AE, #FFFFFF, #90A4AE, #546E7A);
            background-size: 200% 200%;
            border-color: #FFFFFF;
            animation: metal-move 5s ease infinite;
        }

        /* --- OR : EFFET M√âTALLIQUE FORC√â --- */
        .achievement-card[data-tier="gold"].unlocked {
            /* 1. D√©grad√© tr√®s contrast√© (Marron -> Or -> Blanc -> Or -> Marron) */
            background-image: linear-gradient(110deg,
                    #8a6e2f 0%,
                    #eec130 25%,
                    #ffffff 50%,
                    #eec130 75%,
                    #8a6e2f 100%) !important;

            /* 2. Taille plus grande que la carte pour permettre le mouvement */
            background-size: 200% 100% !important;

            /* 3. Bordure brillante */
            border: 2px solid #ffd700 !important;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5) !important;

            /* 4. Animation rapide et continue */
            animation: shine-move 6s linear infinite !important;
        }

        .achievement-card[data-tier="platinum"].unlocked {
            background-image: linear-gradient(45deg, #37474F, #B0BEC5, #FFFFFF, #B0BEC5, #37474F);
            background-size: 200% 200%;
            border-color: #E0F7FA;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.7);
            animation: metal-move 3s ease infinite;
        }

        @keyframes metal-move {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        @keyframes sparkle-anim {
            0% {
                transform: translateY(0);
                opacity: 0.5;
            }

            50% {
                transform: translateY(-3px);
                opacity: 0.9;
            }

            100% {
                transform: translateY(0);
                opacity: 0.5;
            }
        }

        @keyframes shine-move {
            0% {
                background-position: 200% 0;
            }

            100% {
                background-position: -200% 0;
            }
        }

        /* --- ADMIN & UTILS --- */
        textarea {
            width: 100%;
            height: 150px;
            background: rgba(0, 0, 0, 0.3);
            color: white;
            border: 1px solid var(--border);
            margin: 10px 0;
            border-radius: 8px;
            padding: 10px;
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        .modal-content {
            width: 90%;
            max-width: 400px;
            padding: 30px;
            text-align: center;
        }

        .score-big {
            font-size: 3rem;
            font-weight: 800;
            color: var(--green);
            margin: 20px 0;
        }

        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 3000;
            pointer-events: none;
        }

        .toast {
            background: #0f172a;
            border: 2px solid var(--green);
            padding: 15px 20px;
            border-radius: 12px;
            display: flex;
            gap: 15px;
            align-items: center;
            margin-bottom: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            pointer-events: auto;

            /* Animation propre */
            animation: slideIn 0.5s ease-out, fadeOut 0.5s ease-in 4s forwards;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes fadeOut {
            to {
                opacity: 0;
                transform: translateY(-20px);
            }
        }
    </style>
</head>

<body>

    <div class="app-container">
        <!-- HEADER -->
        <header>
            <div class="logo">
                <h1>CrossWord<span>Gen</span></h1>
            </div>
            <div class="stats-bar glass-panel">
                <div style="margin-right:10px; font-weight:bold;">üî• <span id="streakDisplay">0</span></div>

                <div style="display:flex; flex-direction:column; align-items:end;">
                    <div style="display:flex; align-items:center; width:100%">
                        <span style="margin-right:8px; font-size:0.8rem;">Niv. <span id="lvlDisplay">1</span></span>
                        <div class="xp-track">
                            <div id="xpFill" class="xp-fill"></div>
                        </div>
                    </div>
                    <div id="xpText" class="xp-details">0 / 500</div>
                </div>
            </div>
            <!-- Chrono (visible en jeu) -->
            <div id="timerContainer" class="glass-panel"
                style="display:none; padding:5px 12px; font-family:monospace; font-weight:bold;">
                ‚è±Ô∏è <span id="timerDisplay">00:00</span>
            </div>
        </header>

        <!-- MENU PRINCIPAL -->
        <div id="screen-menu" class="screen active">
            <div class="menu-box glass-panel">
                <h2>Menu Principal</h2>

                <!-- Personnalisation -->
                <div style="margin: 20px 0;">
                    <p style="font-size:0.8rem; opacity:0.6; margin-bottom:8px;">üé® Th√®me & Ambiance</p>
                    <div class="theme-picker" id="themeContainer">
                        <!-- G√©n√©r√© par JS -->
                    </div>
                </div>

                <!-- Difficult√© -->
                <div style="margin: 20px 0;">
                    <label style="font-size:0.8rem; opacity:0.7">Difficult√© :</label>
                    <div class="diff-selector" id="diffSelector">
                        <!-- G√©n√©r√© par JS -->
                    </div>
                </div>

                <!-- Choix du pack de mots -->
                <div style="text-align:left; margin-bottom:10px;">
                    <label style="font-size:0.9rem; color:#94a3b8; margin-left:5px;">Sujet :</label>
                    <div class="theme-selector" id="themeSelector">
                        <!-- G√©n√©r√© par JS -->
                    </div>
                </div>

                <!-- Boutons Actions -->
                <div class="menu-grid">
                    <div id="btn-daily" class="menu-btn" onclick="startGame('daily')">
                        <span class="menu-icon">üìÖ</span>
                        <div>
                            <h3>D√©fi du Jour</h3>
                            <small style="opacity:0.7">Grille unique mondiale</small>
                        </div>
                    </div>
                    <div class="menu-btn" onclick="startGame('random')">
                        <span class="menu-icon">üé≤</span>
                        <div>
                            <h3>Partie Rapide</h3>
                            <small style="opacity:0.7">Entra√Ænement infini</small>
                        </div>
                    </div>
                    <div class="menu-btn" onclick="showProfile()">
                        <span class="menu-icon">üèÜ</span>
                        <div>
                            <h3>Profil & Succ√®s</h3>
                            <small style="opacity:0.7">Stats, Badges, Sauvegarde</small>
                        </div>
                    </div>
                    <div class="menu-btn" onclick="showAdmin()">
                        <span class="menu-icon">üõ†Ô∏è</span>
                        <div>
                            <h3>Cr√©ateur</h3>
                            <small style="opacity:0.7">Cr√©er une grille</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ECRAN JEU -->
        <div id="screen-game" class="screen">
            <div style="display:flex; justify-content:space-between; margin-bottom:15px; flex-wrap:wrap; gap:10px;">
                <button class="btn btn-secondary" onclick="goToMenu()">‚¨Ö Menu</button>

                <div style="display:flex; gap:10px;">
                    <button class="btn btn-secondary" onclick="useHint()" title="-50 pts">üí° Indice</button>
                    <button class="btn btn-share" onclick="shareThisGame()">üîó D√©fier</button>
                    <div class="glass-panel"
                        style="padding:8px 15px; font-weight:bold; display:flex; align-items:center;">
                        Score: <span id="scoreDisplay" style="margin-left:5px; color:var(--green);">0</span>
                    </div>
                </div>
            </div>

            <!-- Bulle de d√©finition active (Nouveau) -->
            <div id="activeClueBar" class="active-clue-bar">
                <span id="activeClueText">S√©lectionnez une case...</span>
            </div>


            <div class="game-layout">
                <div class="grid-wrapper">
                    <div id="gameGrid" class="crossword-grid"></div>
                </div>

                <div class="defs-panel glass-panel">
                    <div class="defs-tabs">
                        <div class="tab active" onclick="switchTab('horizontal')">Horizontal</div>
                        <div class="tab" onclick="switchTab('vertical')">Vertical</div>
                    </div>
                    <div id="defList" class="def-list"></div>
                </div>
            </div>

            <!-- Clavier Virtuel (Mobile) -->
            <div id="virtual-keyboard" class="keyboard-container"></div>
        </div>

        <!-- ECRAN PROFIL -->
        <div id="screen-profile" class="screen">
            <div class="menu-box glass-panel" style="max-width:800px">
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
                    <h2>Mon Profil</h2>
                    <button class="btn btn-secondary" onclick="goToMenu()">Fermer</button>
                </div>

                <!-- Stats Grid (IDs corrig√©s pour le JS) -->
                <div class="stats-grid">
                    <div class="stat-box">
                        <span class="stat-val" id="statGames">0</span>
                        <span style="font-size:0.8rem; opacity:0.7">Parties</span>
                    </div>
                    <div class="stat-box">
                        <span class="stat-val" id="statWords">0</span>
                        <span style="font-size:0.8rem; opacity:0.7">Mots</span>
                    </div>
                    <div class="stat-box">
                        <span class="stat-val" id="statBestTime">-</span>
                        <span style="font-size:0.8rem; opacity:0.7">Record</span>
                    </div>
                    <div class="stat-box">
                        <span class="stat-val" id="statPerfect">0</span>
                        <span style="font-size:0.8rem; opacity:0.7">Parfaites</span>
                    </div>
                </div>

                <h3
                    style="margin:20px 0 10px 0; border-top:1px solid var(--border); padding-top:20px; text-align:left;">
                    Succ√®s D√©bloqu√©s
                </h3>
                <div id="achievementsList" class="achievements-list">
                    <!-- G√©n√©r√© par JS -->
                </div>

                <!-- Sauvegarde & Import -->
                <div style="margin-top: 30px; background:rgba(0,0,0,0.2); padding:15px; border-radius:12px;">
                    <h4 style="margin-bottom: 10px;">‚òÅÔ∏è Sauvegarde & Synchro</h4>
                    <p style="font-size: 0.8rem; opacity: 0.7; margin-bottom: 15px;">
                        Gardez votre progression en changeant d'appareil.
                    </p>
                    <div style="display: flex; gap: 10px; justify-content: center; flex-wrap:wrap;">
                        <button class="btn btn-secondary" onclick="exportProfile()">üì§ Sauvegarder (Fichier)</button>
                        <!-- NOUVEAU BOUTON RESET -->
                        <button class="btn btn-danger" onclick="resetProfile()">üóëÔ∏è RAZ</button>
                        <button class="btn btn-secondary" onclick="document.getElementById('importFile').click()">üì•
                            Charger</button>
                        <input type="file" id="importFile" style="display: none" accept=".json"
                            onchange="importProfile(this)">
                    </div>
                </div>
            </div>
        </div>

        <!-- ECRAN ADMIN (CR√âATEUR) -->
        <div id="screen-admin" class="screen">
            <div class="menu-box glass-panel">
                <h2>Cr√©ateur de Grille</h2>
                <p style="font-size:0.8rem; opacity:0.7; margin-bottom:10px;">Collez votre JSON ci-dessous :</p>
                <textarea id="jsonInput"
                    placeholder='[&#10;  {"mot":"CHAT", "definition":"Animal"},&#10;  {"mot":"CHIEN", "definition":"Aboye"}&#10;]'></textarea>

                <div style="display:grid; gap:10px; grid-template-columns: 1fr 1fr;">
                    <button class="btn" onclick="loadCustom()">üéÆ Tester</button>
                    <button class="btn btn-secondary" onclick="goToMenu()">Retour</button>
                </div>
                <button class="btn btn-share" style="width:100%; margin-top:10px;" onclick="shareUrl()">üîó Copier le
                    Lien de Partage</button>
            </div>
        </div>

        <!-- MODAL VICTOIRE -->
        <div id="victoryModal" class="modal">
            <div class="modal-content glass-panel">
                <div style="font-size:3rem;">üéâ</div>
                <h2>Victoire !</h2>
                <div id="finalScore" class="score-big">+100 XP</div>
                <p id="streakBonus" style="color:#fbbf24; font-weight:bold; margin-bottom:20px;"></p>

                <div style="display:flex; gap:10px; justify-content:center;">
                    <button class="btn" onclick="closeModal()">Continuer</button>
                    <button class="btn btn-share" onclick="shareEmoji()">Partager üì±</button>
                </div>
            </div>
        </div>

        <!-- TOASTS (NOTIFICATIONS SUCC√àS) -->
        <div id="toastContainer" class="toast-container"></div>
    </div>

    <script>
        /* --- DATA PACKS (MOTS) --- */
        const PACKS = {
            
            "animaux_bibliques": [
                { "mot": "PHOQUE", "definition": "Ses peaux recouvraient le tabernacle (Exode)" },
                { "mot": "COBRA", "definition": "Le nourrisson jouera sur son trou (Isa√Øe 11)" },
                { "mot": "HIPPOPOTAME", "definition": "Mange de l'herbe verte, identifi√© au B√©h√©moth (Job)" },
                { "mot": "CROCODILE", "definition": "Sa peau est une armure, identifi√© au L√©viathan (Job)" },
                { "mot": "DAMAN", "definition": "Petit animal sage cach√©s dans les rochers (Psaume 104)" },
                { "mot": "TAUREAU", "definition": "Symbole de force brute, impossible √† dompter (Job 39)" },
                { "mot": "AIGLE", "definition": "Construit son nid sur les hauteurs (Job 39)" },
                { "mot": "CERF", "definition": "Grimpeur agile, il a les pieds comme des biches" },
                { "mot": "LION", "definition": "R√¥de comme un pr√©dateur, cherchant qui d√©vorer (1 Pierre)" },
                { "mot": "OURS", "definition": "David en a tu√© un pour prot√©ger son troupeau" },
                { "mot": "ANE", "definition": "Animal de b√¢t, a parl√© √† Balaam" },
                { "mot": "ANESSES", "definition": "Sa√ºl les cherchait quand il fut oint roi" },
                { "mot": "MOINEAU", "definition": "Vendu pour une pi√®ce de monnaie, Dieu ne l'oublie pas" },
                { "mot": "CORBEAU", "definition": "Dieu les nourrit, ils n'ont ni grenier ni moisson (Luc)" },
                { "mot": "CAILLE", "definition": "Apport√©e par le vent pour nourrir Isra√´l au d√©sert" },
                { "mot": "POISSON", "definition": "A englouti Jonas sur ordre de J√©hovah" },
                { "mot": "BREBIS", "definition": "Connait la voix de son berger" },
                { "mot": "CHEVRE", "definition": "Animal pur, son lait nourrissait la maison (Proverbes)" },
                { "mot": "LOUP", "definition": "Le proph√®te Isa√Øe dit qu'il r√©sidera avec l'agneau" },
                { "mot": "LEOPARD", "definition": "B√™te rapide, ne peut changer ses taches (J√©r√©mie)" },
                { "mot": "SAUTERELLE", "definition": "Avance en ordre comme une arm√©e (Proverbes 30)" },
                { "mot": "FOURMI", "definition": "Pr√©pare sa nourriture en √©t√©, exemple de sagesse" },
                { "mot": "GEKO", "definition": "Saisissable avec les mains, vit dans les palais (Prov 30)" },
                { "mot": "SERPENT", "definition": "Le plus prudent des animaux des champs (Gen√®se)" },
                { "mot": "COLOMBE", "definition": "Simple et innocente, signe du Saint-Esprit" },
                { "mot": "VAUTOUR", "definition": "Son ≈ìil voit la nourriture de loin (Job)" },
                { "mot": "AUTRUCHE", "definition": "Dieu l'a priv√©e de sagesse, mais elle court vite" },
                { "mot": "CHAMEAU", "definition": "C'est plus facile pour lui de passer par le trou d'une aiguille" },
                { "mot": "COCHON", "definition": "L'animal lav√© retourne √† sa boue (Proverbe)" },
                { "mot": "PORC", "definition": "Le fils prodigue aurait voulu manger ses caroubes" },
                { "mot": "CHIEN", "definition": "M√™me lui mange les miettes sous la table" },
                { "mot": "RENARD", "definition": "A des tani√®res, mais le Fils de l'homme n'a rien" },
                { "mot": "CHACAL", "definition": "Symbole de d√©solation, habite les ruines" },
                { "mot": "HUPPE", "definition": "Oiseau d√©clar√© impur dans la Loi mosaique" },
                { "mot": "CIGOGNE", "definition": "Connait bien son temps et sa migration (J√©r√©mie)" },
                { "mot": "PELICAN", "definition": "Oiseau solitaire du d√©sert (Psaume 102)" },
                { "mot": "GRENOUILLE", "definition": "Deuxi√®me plaie d'√âgypte" },
                { "mot": "MOUSTIQUE", "definition": "La poussi√®re transform√©e en insectes (Plaie d'√âgypte)" },
                { "mot": "TAON", "definition": "Insecte piquant envoy√© comme plaie" },
                { "mot": "BOUC", "definition": "Animal puissant, repr√©sente la Gr√®ce dans Daniel" },
                { "mot": "BELIER", "definition": "Ses cornes furent retenues dans un buisson (Sacrifice d'Abraham)" },
                { "mot": "GAZELLE", "definition": "Rapide, symbole de la femme aim√©e (Cantique)" },
                { "mot": "BICHE", "definition": "Naphtali est compar√© √† elle (Gen√®se)" },
                { "mot": "CHEVAL", "definition": "On le pr√©pare pour le jour de la bataille" },
                { "mot": "MULET", "definition": "Salomon est mont√© dessus pour son onction" },
                { "mot": "SANGSUE", "definition": "Crie sans cesse 'Donne ! Donne !'" },
                { "mot": "VIPERE", "definition": "Paul en a secou√© une dans le feu √† Malte" },
                { "mot": "SCORPION", "definition": "Pire qu'un fouet, symbole de douleur (1 Rois 12)" },
                { "mot": "VER", "definition": "A rong√© la plante de Jonas" },
                { "mot": "MITES", "definition": "Elles rongent les tr√©sors terrestres" },
                { "mot": "MOUCHE", "definition": "Fait sentir mauvais l'huile du parfumeur" },
                { "mot": "PAON", "definition": "Import√© par les navires de Salomon" },
                { "mot": "SINGE", "definition": "Rapport√© d'Ophir par la flotte de Salomon" },
                { "mot": "HYENE", "definition": "Animal ray√© mentionn√© dans J√©r√©mie" },
                { "mot": "CHOUETTE", "definition": "Habitant des ruines d√©sertiques" },
                { "mot": "OISEAU", "definition": "J√©sus dit: 'Regardez-les attentivement'" },
                { "mot": "BALEINE", "definition": "Gros Poisson pour Jonas" },
                { "mot": "TOURTERELLE", "definition": "Offrande des pauvres au temple (L√©vitique)" },
                { "mot": "PIGEON", "definition": "Utilis√© pour les sacrifices si l'agneau √©tait trop cher" },
                { "mot": "ANTILOPE", "definition": "Animal pur autoris√© √† la consommation (Deut√©ronome)" },
                { "mot": "CHEVREUIL", "definition": "Rapide, mentionn√© dans le menu de Salomon" },
                { "mot": "PERDRIX", "definition": "David se compare √† elle, chass√©e dans les montagnes" },
                { "mot": "MOUCHERON", "definition": "Les pharisiens le filtrent mais avalent le chameau" },
                { "mot": "HERON", "definition": "Oiseau d√©clar√© impur selon la Loi" },
                { "mot": "CORMORAN", "definition": "Oiseau p√™cheur impur (L√©vitique 11)" },
                { "mot": "MOUETTE", "definition": "Volatile interdit √† la consommation" },
                { "mot": "HIBOU", "definition": "Symbole de d√©solation, habite les ruines" },
                { "mot": "CHEVRE", "definition": "Ses poils servaient √† tisser des toiles de tente" },
                { "mot": "BETE SAUVAGE", "definition": "Symbole politique montant de la mer (R√©v√©lation)" },
                { "mot": "DRAGON", "definition": "Symbole de Satan dans la R√©v√©lation" },
                { "mot": "BOUC", "definition": "Le poilu repr√©sente le roi de Gr√®ce (Daniel 8)" }
            ],
            "personnages_bibliques": [
                { "mot": "JEHOVAH", "definition": "Le nom de Dieu (Psaume 83:18)" },
                { "mot": "JESUS", "definition": "Le Fils de Dieu, la 'Parole'" },
                { "mot": "MICHEL", "definition": "L'archange, chef de l'arm√©e des anges" },
                { "mot": "SATAN", "definition": "Le chef des d√©mons, le p√®re du mensonge" },
                { "mot": "ADAM", "definition": "Le premier homme humain" },
                { "mot": "EVE", "definition": "M√®re de tous les vivants" },
                { "mot": "ABEL", "definition": "Son sacrifice fut approuv√©, tu√© par son fr√®re" },
                { "mot": "CAIN", "definition": "A fond√© la premi√®re ville, meurtrier de son fr√®re" },
                { "mot": "NOE", "definition": "Pr√©dicateur de justice, a construit l'arche" },
                { "mot": "NIMROD", "definition": "Puissant chasseur en opposition avec J√©hovah" },
                { "mot": "ABRAHAM", "definition": "Ami de J√©hovah, p√®re d'une multitude" },
                { "mot": "SARA", "definition": "A ri en apprenant qu'elle aurait un fils" },
                { "mot": "ISAAC", "definition": "Fils de la promesse, a failli √™tre sacrifi√©" },
                { "mot": "JACOB", "definition": "A lutt√© avec un ange pour √™tre b√©ni" },
                { "mot": "JOSEPH", "definition": "Vendu par ses fr√®res, devenu intendant en √âgypte" },
                { "mot": "MOISE", "definition": "A re√ßu la Loi au mont Sina√Ø" },
                { "mot": "AARON", "definition": "Premier grand pr√™tre d'Isra√´l" },
                { "mot": "PHARAON", "definition": "Son c≈ìur s'est endurci malgr√© les dix plaies" },
                { "mot": "RAHAB", "definition": "Prostitu√©e de J√©richo devenue anc√™tre de J√©sus" },
                { "mot": "JOSU√â", "definition": "Successeur de Mo√Øse, a fait tomber les murs" },
                { "mot": "SAMSON", "definition": "Juge √† la force surnaturelle, trahi par Dalila" },
                { "mot": "RUTH", "definition": "Moabite fid√®le qui a dit : 'Ton peuple sera mon peuple'" },
                { "mot": "SAMUEL", "definition": "Proph√®te qui a oint Sa√ºl puis David" },
                { "mot": "SAUL", "definition": "Premier roi d'Isra√´l, a fini par consulter une m√©dium" },
                { "mot": "DAVID", "definition": "L'homme selon le c≈ìur de Dieu, a vaincu Goliath" },
                { "mot": "GOLIATH", "definition": "G√©ant philistin abattu par une fronde" },
                { "mot": "JONATHAN", "definition": "Meilleur ami de David, fils du roi Sa√ºl" },
                { "mot": "SALOMON", "definition": "A demand√© la sagesse, a b√¢ti le temple" },
                { "mot": "ELIE", "definition": "Proph√®te nourri par des corbeaux, mont√© dans la temp√™te" },
                { "mot": "ELIS√âE", "definition": "A re√ßu deux parts de l'esprit d'√âlie" },
                { "mot": "JEZABEL", "definition": "Reine m√©chante, mang√©e par les chiens" },
                { "mot": "JONAS", "definition": "A fui sa mission vers Tarsis, aval√© par un poisson" },
                { "mot": "JOB", "definition": "A gard√© son int√©grit√© malgr√© la perte de tout" },
                { "mot": "ESAIE", "definition": "A proph√©tis√© abondamment sur le Messie" },
                { "mot": "JEREMIE", "definition": "Proph√®te pleurant sur J√©rusalem, jet√© dans une citerne" },
                { "mot": "DANIEL", "definition": "Jet√© dans la fosse aux lions pour avoir pri√©" },
                { "mot": "NEBOUKADNETSAR", "definition": "Roi de Babylone, a d√©truit J√©rusalem" },
                { "mot": "ESTHER", "definition": "Reine juive qui a sauv√© son peuple de Haman" },
                { "mot": "MARIE", "definition": "Vierge choisie pour porter le Fils de Dieu" },
                { "mot": "JOSEPH", "definition": "Charpentier, p√®re adoptif de J√©sus" },
                { "mot": "JEAN", "definition": "Le Baptiseur, a pr√©par√© le chemin" },
                { "mot": "PIERRE", "definition": "A march√© sur l'eau, a reni√© J√©sus trois fois" },
                { "mot": "JUDAS", "definition": "Iscariote, a livr√© J√©sus pour 30 pi√®ces d'argent" },
                { "mot": "PONCEPILATE", "definition": "Gouverneur romain, s'est lav√© les mains" },
                { "mot": "THOMAS", "definition": "A eu besoin de voir les trous des clous pour croire" },
                { "mot": "PAUL", "definition": "Ap√¥tre des nations, ancien pers√©cuteur" },
                { "mot": "ETIENNE", "definition": "Premier martyr chr√©tien, lapid√©" },
                { "mot": "CORNILLE", "definition": "Officier romain, premier converti non-juif" },
                { "mot": "TIMOTH√âE", "definition": "Jeune compagnon de voyage de Paul" },
                { "mot": "LUC", "definition": "Le m√©decin bien-aim√©, r√©dacteur d'un √©vangile" },
                { "mot": "HENOK", "definition": "Il a march√© avec le vrai Dieu, p√®re de Mathoush√©lah" },
                { "mot": "MATHOUSHELAH", "definition": "L'homme qui a v√©cu le plus longtemps (969 ans)" },
                { "mot": "MELKISEDEK", "definition": "Roi de Salem et pr√™tre du Dieu Tr√®s-Haut sans g√©n√©alogie" },
                { "mot": "LOT", "definition": "Neveu d'Abraham, sa femme est devenue une statue de sel" },
                { "mot": "ISAIE", "definition": "A vu la gloire de J√©hovah et a dit : 'Me voici !'" },
                { "mot": "EZECHIEL", "definition": "A vu un char c√©leste et a mang√© un rouleau" },
                { "mot": "DANIEL", "definition": "A interpr√©t√© l'√©criture sur le mur pour Belshatsar" },
                { "mot": "BELSHATSAR", "definition": "Dernier roi de Babylone, a vu une main √©crire" },
                { "mot": "BOAZ", "definition": "Racheteur de Ruth et anc√™tre de J√©sus" },
                { "mot": "MARDOCHEE", "definition": "Cousin d'Esther, a refus√© de s'incliner devant Haman" },
                { "mot": "HAMAN", "definition": "Agaguite ennemi des Juifs, pendu √† son propre poteau" },
                { "mot": "GEDEON", "definition": "A vaincu Madian avec 300 hommes et des jarres" },
                { "mot": "BALAAM", "definition": "Proph√®te avide, son √¢nesse l'a repris" },
                { "mot": "BALAK", "definition": "Roi de Moab qui voulait maudire Isra√´l" },
                { "mot": "JOSIAS", "definition": "Bon roi enfant, a br√ªl√© les os des pr√™tres pa√Øens" },
                { "mot": "EZECHIAS", "definition": "A pri√© lors du si√®ge de Sennach√©rib, vie prolong√©e de 15 ans" },
                { "mot": "SENNACHERIB", "definition": "Roi assyrien arrogant, son arm√©e fut d√©cim√©e par un ange" },
                { "mot": "ABSALOM", "definition": "Fils rebelle de David, ses cheveux se prirent dans un arbre" },
                { "mot": "BATHSHEBA", "definition": "Femme d'Urie, devenue m√®re de Salomon" },
                { "mot": "NATHAN", "definition": "Proph√®te ayant repris David avec l'histoire de la brebis" },
                { "mot": "DALILA", "definition": "A coup√© les cheveux de Samson contre de l'argent" },
                { "mot": "LAZARE", "definition": "Ami de J√©sus, sorti de la tombe apr√®s 4 jours" },
                { "mot": "MARTHE", "definition": "S≈ìur de Lazare, s'inqui√©tait de beaucoup de choses" },
                { "mot": "ZACCHEE", "definition": "Collecteur d'imp√¥ts de petite taille mont√© sur un arbre" },
                { "mot": "NICODEME", "definition": "Est venu voir J√©sus de nuit, a apport√© des aromates" },
                { "mot": "BARNABAS", "definition": "Fils de consolation, a accompagn√© Paul" },
                { "mot": "SILAS", "definition": "Compagnon de prison de Paul √† Philippes" },
                { "mot": "APOLLOS", "definition": "Orateur √©loquent, instruit par Priscille et Aquila" },
                { "mot": "GAMALIEL", "definition": "Enseignant de la Loi respect√©, a conseill√© la prudence" },
                { "mot": "ONESIME", "definition": "Esclave fugitif devenu un fr√®re fid√®le pour Paul" }
            ],
            "lieux_bibliques": [
                { "mot": "EDEN", "definition": "Jardin des d√©lices, berceau de l'humanit√©" },
                { "mot": "ARARAT", "definition": "Montagnes o√π l'arche de No√© s'est pos√©e" },
                { "mot": "BABEL", "definition": "Lieu de la confusion des langues" },
                { "mot": "OUR", "definition": "Ville chald√©enne d'o√π Abraham est parti" },
                { "mot": "SODOME", "definition": "D√©truite par le feu et le soufre avec Gomorrhe" },
                { "mot": "EGYPTE", "definition": "Pays de l'esclavage, le 'pays du Nord' proph√©tique" },
                { "mot": "NIL", "definition": "Fleuve chang√© en sang par Mo√Øse" },
                { "mot": "SINAI", "definition": "Montagne o√π la Loi a √©t√© donn√©e" },
                { "mot": "CANAAN", "definition": "La Terre promise ruisselant de lait et de miel" },
                { "mot": "JERICHO", "definition": "Ville aux murailles effondr√©es, ville des palmiers" },
                { "mot": "JERUSALEM", "definition": "La ville du Grand Roi, lieu du temple" },
                { "mot": "SION", "definition": "Montagne sainte, symbole du Royaume c√©leste" },
                { "mot": "BETHLEEM", "definition": "Maison du pain, lieu de naissance de David et J√©sus" },
                { "mot": "NAZARETH", "definition": "Ville o√π J√©sus a grandi" },
                { "mot": "GALILEE", "definition": "R√©gion o√π J√©sus a fait la plupart de ses miracles" },
                { "mot": "JOURDAIN", "definition": "Fleuve o√π J√©sus fut baptis√©" },
                { "mot": "MERROUGE", "definition": "Travers√©e √† pied sec par les Isra√©lites" },
                { "mot": "BABYLONE", "definition": "Empire mondial de la fausse religion (R√©v√©lation)" },
                { "mot": "NINIVE", "definition": "La grande ville sanguinaire, capitale assyrienne" },
                { "mot": "TARSIS", "definition": "Destination de fuite de Jonas (l'Espagne actuelle)" },
                { "mot": "CARMEL", "definition": "Mont o√π √âlie a d√©fi√© les proph√®tes de Baal" },
                { "mot": "GETHSEMANE", "definition": "Jardin du pressoir √† huile, lieu d'angoisse" },
                { "mot": "GOLGOTHA", "definition": "Lieu du Cr√¢ne, site de l'ex√©cution de J√©sus" },
                { "mot": "GEHENNE", "definition": "Vall√©e de Hinnom, symbole de destruction √©ternelle" },
                { "mot": "HARMAGUEDON", "definition": "Lieu symbolique de la guerre finale de Dieu " },
                { "mot": "DAMAS", "definition": "Sur ce chemin, Saul a √©t√© aveugl√© par la lumi√®re" },
                { "mot": "ANTIOCHE", "definition": "L√† o√π les disciples furent appel√©s chr√©tiens pour la premi√®re fois" },
                { "mot": "ROME", "definition": "Ville o√π Paul a √©t√© emprisonn√© et ex√©cut√©" },
                { "mot": "PATMOS", "definition": "√éle de l'exil de Jean o√π il re√ßut la R√©v√©lation" },
                { "mot": "TARTARE", "definition": "√âtat d'abaissement des anges d√©chus (2 Pierre)" },
                { "mot": "SHEOL", "definition": "La tombe commune aux hommes (H√©breu)" },
                { "mot": "HADES", "definition": "La tombe commune aux hommes (Grec)" },
                { "mot": "AREOPAGE", "definition": "Colline de Mars √† Ath√®nes o√π Paul a pr√™ch√©" },
                { "mot": "SILOE", "definition": "Piscine o√π l'aveugle s'est lav√© et a vu" },
                { "mot": "BETHANIE", "definition": "Village de Marthe, Marie et Lazare" },
                { "mot": "EMMAUS", "definition": "Village vers lequel marchaient deux disciples apr√®s la r√©surrection" },
                { "mot": "MEGUIDDO", "definition": "Plaine strat√©gique associ√©e √† la guerre finale" },
                { "mot": "PHILIPPES", "definition": "Ville o√π Paul et Silas furent emprisonn√©s et ont chant√©" },
                { "mot": "CORINTHE", "definition": "Ville connue pour son immoralit√© et sa congr√©gation troubl√©e" },
                { "mot": "EPHESE", "definition": "Ville du temple d'Art√©mis, destinataire d'une lettre de Paul" },
                { "mot": "SAMARIE", "definition": "Capitale du royaume du Nord, rivale de J√©rusalem" },
                { "mot": "SICHEM", "definition": "Lieu du puits de Jacob et du serment de Joseph" },
                { "mot": "HEBRON", "definition": "Ville de refuge, lieu de s√©pulture des patriarches" },
                { "mot": "BETHEL", "definition": "Maison de Dieu, Jacob y a vu l'√©chelle" },
                { "mot": "GOMORRHE", "definition": "Ville voisine de Sodome, d√©truite par le feu" },
                { "mot": "SUSE", "definition": "Capitale perse o√π vivait Esther" },
                { "mot": "CAPERNAUM", "definition": "Ville au bord du lac, quartier g√©n√©ral de J√©sus" },
                { "mot": "CANA", "definition": "Village du premier miracle (eau chang√©e en vin)" },
                { "mot": "CESAREE", "definition": "Port romain, r√©sidence de Corneille et Pilate" },
                { "mot": "JOPPE", "definition": "Port o√π Jonas a embarqu√© et Pierre a eu sa vision" },
                { "mot": "TYR", "definition": "Ville riche condamn√©e √† devenir un s√©choir √† filets" },
                { "mot": "SIDON", "definition": "Ville ph√©nicienne voisine de Tyr" },
                { "mot": "MOAB", "definition": "Pays ennemi descendant de Lot, √† l'est du Jourdain" },
                { "mot": "EDOM", "definition": "Pays des descendants d'√âsa√º, la terre rouge" },
                { "mot": "AMMON", "definition": "Nations ennemies, souvent en guerre contre Isra√´l" },
                { "mot": "CHYPRE", "definition": "√éle natale de Barnabas, travers√©e par Paul" },
                { "mot": "MALTE", "definition": "√éle du naufrage de Paul (M√©lita)" },
                { "mot": "THESSALONIQUE", "definition": "Ville mac√©donienne o√π les Juifs √©taient jaloux" },
                { "mot": "BEREE", "definition": "Ville o√π les Juifs examinaient les √âcritures chaque jour" },
                { "mot": "ATHENES", "definition": "Ville pleine d'idoles, lieu de l'Ar√©opage" },
                { "mot": "LYSTRES", "definition": "Ville o√π Paul fut lapid√© et laiss√© pour mort" },
                { "mot": "DERBE", "definition": "Derni√®re √©tape du premier voyage de Paul" }
            ],
            
            "tech": [
                { "mot": "INTERNET", "definition": "R√©seau mondial" }, { "mot": "NAVIGATEUR", "definition": "Logiciel pour surfer" },
                { "mot": "INTERFACE", "definition": "Lien homme-machine" }, { "mot": "SATELLITE", "definition": "Objet en orbite" },
                { "mot": "TELEPHONE", "definition": "Appareil de communication" }, { "mot": "ORDINATEUR", "definition": "Machine de calcul" },
                { "mot": "CLAVIER", "definition": "Pour √©crire" }, { "mot": "SOURIS", "definition": "Pour cliquer" },
                { "mot": "ECRAN", "definition": "Pour voir" }, { "mot": "PIXEL", "definition": "Point d'image" },
                { "mot": "CODE", "definition": "Langage machine" }, { "mot": "WIFI", "definition": "Sans fil" },
                { "mot": "SERVEUR", "definition": "Stockage distant" }, { "mot": "DONNEE", "definition": "Information binaire" },
                { "mot": "ALGORITHME", "definition": "Suite logique" }, { "mot": "ROBOT", "definition": "Machine autonome" },
                { "mot": "RESEAU", "definition": "Connexion de machines" }, { "mot": "VIRUS", "definition": "Programme malveillant" }
            ],
            "animaux": [
                { "mot": "GIRAFE", "definition": "Long cou" }, { "mot": "ELEPHANT", "definition": "Trompe" },
                { "mot": "LION", "definition": "Roi de la jungle" }, { "mot": "TIGRE", "definition": "F√©lin ray√©" },
                { "mot": "AIGLE", "definition": "Rapace" }, { "mot": "REQUIN", "definition": "Pr√©dateur marin" },
                { "mot": "BALEINE", "definition": "Mammif√®re marin" }, { "mot": "CHIEN", "definition": "Meilleur ami" },
                { "mot": "CHAT", "definition": "F√©lin domestique" }, { "mot": "LOUP", "definition": "Chasse en meute" },
                { "mot": "SINGE", "definition": "Primate agile" }, { "mot": "OURS", "definition": "Aime le miel" },
                { "mot": "ZEBRE", "definition": "Cheval ray√©" }, { "mot": "SERPENT", "definition": "Reptile rampant" }
            ],
            "pays_monde": [
                { "mot": "BELGIQUE", "definition": "Le pays qui a les meilleures frites" },
                { "mot": "SUISSE", "definition": "Neutre, riche et pr√©cis comme un coucou" },
                { "mot": "ITALIE", "definition": "Une botte qui ne marche pas mais cuisine divinement" },
                { "mot": "ESPAGNE", "definition": "On y fait la sieste apr√®s avoir mang√© tard" },
                { "mot": "ALLEMAGNE", "definition": "Ils ont de superbes voitures" },
                { "mot": "ROYAUMEUNI", "definition": "A colonis√© le monde pour des √©pices" },
                { "mot": "IRLANDE", "definition": "L'√Æle d'√©meraude o√π le tr√®fle porte chance" },
                { "mot": "PORTUGAL", "definition": "Des explorateurs devenus champions de morue" },
                { "mot": "PAYSBAS", "definition": "L√† o√π il y a plus de v√©los que d'habitants" },
                { "mot": "LUXEMBOURG", "definition": "Un coffre-fort d√©guis√© en pays" },
                { "mot": "MONACO", "definition": "Un rocher pour milliardaires et Formule 1" },
                { "mot": "VATICAN", "definition": "Le plus petit pays" },
                { "mot": "GRECE", "definition": "A invent√© la d√©mocratie et la salade feta" },
                { "mot": "AUTRICHE", "definition": "Le pays de Mozart et des escalopes pan√©es" },
                { "mot": "HONGRIE", "definition": "Le pays du Rubik's Cube et du paprika" },
                { "mot": "POLOGNE", "definition": "A souvent disparu de la carte, mais toujours revenue" },
                { "mot": "TCHEQUIE", "definition": "Champions du monde de consommation de bi√®re" },
                { "mot": "SUEDE", "definition": "Ils t'obligent √† monter tes meubles toi-m√™me" },
                { "mot": "NORVEGE", "definition": "Des vikings qui ont trouv√© du p√©trole" },
                { "mot": "FINLANDE", "definition": "Le pays du P√®re No√´l et du Nokia 3310" },
                { "mot": "DANEMARK", "definition": "L√† o√π on marche sur des LEGO pieds nus" },
                { "mot": "ISLANDE", "definition": "Terre de glace o√π les volcans bloquent les avions" },
                { "mot": "RUSSIE", "definition": "Si grand qu'il fait nuit d'un c√¥t√© quand il fait jour de l'autre" },
                { "mot": "UKRAINE", "definition": "Le grenier √† bl√© de l'Europe" },
                { "mot": "CROATIE", "definition": "La c√¥te aux mille √Æles et aux dalmatiens" },
                { "mot": "SERBIE", "definition": "Le pays de Djokovic et des Balkans ardents" },
                { "mot": "ROUMANIE", "definition": "La patrie des Dacia" },
                { "mot": "BULGARIE", "definition": "Le pays du yaourt et des roses" },
                { "mot": "ALBANIE", "definition": "Le pays des aigles et des bunkers" },
                { "mot": "ETATSUNIS", "definition": "Ont jet√© le th√© √† la mer pour ne pas payer d'imp√¥ts" },
                { "mot": "CANADA", "definition": "S'excuse tout le temps en mangeant de la poutine" },
                { "mot": "MEXIQUE", "definition": "Aime les sombreros et la nourriture piquante" },
                { "mot": "BRESIL", "definition": "Le pays o√π le football est une religion" },
                { "mot": "ARGENTINE", "definition": "Le pays du tango, du steak et de Messi" },
                { "mot": "CHILI", "definition": "Le pays le plus fin et le plus long du monde" },
                { "mot": "PEROU", "definition": "L√† o√π les Incas ont b√¢ti des cit√©s dans les nuages" },
                { "mot": "COLOMBIE", "definition": "Le pays de l'√©meraude et du caf√© arabica" },
                { "mot": "VENEZUELA", "definition": "Poss√®de les plus grandes r√©serves de p√©trole (et d'inflation)" },
                { "mot": "BOLIVIE", "definition": "Le pays le plus haut perch√©, sans acc√®s √† la mer" },
                { "mot": "URUGUAY", "definition": "Petit pays qui a gagn√© la premi√®re Coupe du Monde" },
                { "mot": "PARAGUAY", "definition": "Un c≈ìur en Am√©rique du Sud qui parle guarani" },
                { "mot": "EQUATEUR", "definition": "Il porte le nom de la ligne du milieu" },
                { "mot": "CUBA", "definition": "L'√Æle des cigares et des vieilles voitures am√©ricaines" },
                { "mot": "JAMAIQUE", "definition": "L'√Æle du reggae et des hommes les plus rapides" },
                { "mot": "HAITI", "definition": "Premi√®re r√©publique noire ind√©pendante" },
                { "mot": "PANAMA", "definition": "Connu pour son canal et ses chapeaux (qui viennent d'√âquateur)" },
                { "mot": "COSTARICA", "definition": "Pas d'arm√©e, juste de la pure vie (Pura Vida)" },
                { "mot": "CHINE", "definition": "A construit un mur visible (ou pas) depuis l'espace" },
                { "mot": "JAPON", "definition": "Le pays du Soleil Levant et des sushis" },
                { "mot": "INDE", "definition": "La plus grande d√©mocratie et le plus de vaches sacr√©es" },
                { "mot": "COREE", "definition": "Coup√©e en deux : K-Pop au Sud, dictature au Nord" },
                { "mot": "VIETNAM", "definition": "Le pays du dragon et de la soupe Ph√¥" },
                { "mot": "THAILANDE", "definition": "Le pays du sourire et des plats tr√®s √©pic√©s" },
                { "mot": "INDONESIE", "definition": "Archipel aux 17 000 √Æles et volcans" },
                { "mot": "PHILIPPINES", "definition": "L'archipel nomm√© en l'honneur d'un roi d'Espagne" },
                { "mot": "MALAISIE", "definition": "L√† o√π les tours jumelles Petronas touchent le ciel" },
                { "mot": "SINGAPOUR", "definition": "Une ville-√©tat o√π le chewing-gum est contr√¥l√©" },
                { "mot": "MONGOLIE", "definition": "L'empire de Gengis Khan devenu terre de nomades" },
                { "mot": "NEPAL", "definition": "Le toit du monde, l√† o√π est l'Everest" },
                { "mot": "AFGHANISTAN", "definition": "C≈ìur de l'Asie, terre de montagnes et d'histoires" },
                { "mot": "PAKISTAN", "definition": "Le pays des purs, voisin de l'Inde" },
                { "mot": "IRAN", "definition": "L'ancienne Perse, pays des tapis et des po√®tes" },
                { "mot": "IRAK", "definition": "Le berceau de la civilisation, entre le Tigre et l'Euphrate" },
                { "mot": "SYRIE", "definition": "Terre historique de Damas, sur la route de la soie" },
                { "mot": "LIBAN", "definition": "Le pays du c√®dre, la Suisse du Moyen-Orient" },
                { "mot": "ISRAEL", "definition": "Terre promise o√π coule le lait et le miel" },
                { "mot": "JORDANIE", "definition": "Abrite la cit√© rose de P√©tra" },
                { "mot": "ARABIESAOUDITE", "definition": "D√©sert de p√©trole et berceau de l'Islam" },
                { "mot": "EMIRATS", "definition": "Ont construit des √Æles en forme de palmiers" },
                { "mot": "TURQUIE", "definition": "A cheval sur deux continents, pont entre Orient et Occident" },
                { "mot": "EGYPTE", "definition": "Aime les chats et les pyramides depuis 4000 ans" },
                { "mot": "MAROC", "definition": "Royaume du couchant, du th√© √† la menthe et de l'Atlas" },
                { "mot": "ALGERIE", "definition": "Le plus grand pays d'Afrique, terre des Fennecs" },
                { "mot": "TUNISIE", "definition": "L'ancienne Carthage, pays du jasmin" },
                { "mot": "SENEGAL", "definition": "Pays de la T√©ranga (hospitalit√©) √† l'ouest" },
                { "mot": "COTEDIVOIRE", "definition": "Premier producteur de cacao (merci pour le chocolat)" },
                { "mot": "MALI", "definition": "L'empire de l'or de Mansa Moussa" },
                { "mot": "NIGERIA", "definition": "Le g√©ant de l'Afrique et de Nollywood" },
                { "mot": "CAMEROUN", "definition": "L'Afrique en miniature, pays des Lions Indomptables" },
                { "mot": "RDC", "definition": "C≈ìur de l'Afrique, riche en minerais et en rumba" },
                { "mot": "KENYA", "definition": "Terre de safaris et de coureurs de marathon" },
                { "mot": "ETHIOPIE", "definition": "Jamais colonis√©e, berceau du caf√©" },
                { "mot": "SOMALIE", "definition": "La corne de l'Afrique, connue pour ses pirates" },
                { "mot": "AFRIQUEDUSUD", "definition": "La nation arc-en-ciel de Mandela" },
                { "mot": "MADAGASCAR", "definition": "L'√Æle rouge o√π vivent les l√©muriens" },
                { "mot": "AUSTRALIE", "definition": "L√† o√π tous les animaux essaient de te tuer" },
                { "mot": "NOUVELLEZELANDE", "definition": "Terre du milieu, peupl√©e de moutons et de kiwis" },
                { "mot": "FIDJI", "definition": "Paradis du Pacifique et du rugby √† 7" },
                { "mot": "SAMOA", "definition": "√éles polyn√©siennes aux guerriers tatou√©s" },
                { "mot": "TAHITI", "definition": "Pas un pays (France), mais le r√™ve polyn√©sien" },
                { "mot": "ANDORRE", "definition": "Coinc√© dans les Pyr√©n√©es pour le shopping pas cher" },
                { "mot": "SANMARIN", "definition": "La plus vieille r√©publique du monde" },
                { "mot": "LIECHTENSTEIN", "definition": "On oublie souvent qu'il existe, sauf les banquiers" },
                { "mot": "MALTE", "definition": "Une √Æle forteresse au milieu de la M√©diterran√©e" },
                { "mot": "CHYPRE", "definition": "L'√Æle d'Aphrodite, divis√©e en deux" },
                { "mot": "GEORGIE", "definition": "A invent√© le vin il y a 8000 ans" },
                { "mot": "ARMENIE", "definition": "Premier pays officiellement chr√©tien de l'histoire" },
                { "mot": "AZERBAIDJAN", "definition": "Terre de feu au bord de la Caspienne" },
                { "mot": "KAZAKHSTAN", "definition": "Le plus grand pays sans acc√®s √† la mer (Borat en vient)" },
                { "mot": "OUZBEKISTAN", "definition": "Sur la route de la soie, joyau de Samarcande" },
                { "mot": "BANGLADESH", "definition": "Le pays des rivi√®res, n√© en 1971" },
                { "mot": "SRILANKA", "definition": "La larme de l'Inde, √Æle du th√© Ceylan" },
                { "mot": "MYANMAR", "definition": "Le pays aux mille pagodes dor√©es" },
                { "mot": "LAOS", "definition": "Le pays au million d'√©l√©phants" },
                { "mot": "CAMBODGE", "definition": "Terre des temples d'Angkor Wat" },
                { "mot": "TAINWAN", "definition": "L'√Æle technologique qui fabrique tes puces" },
                { "mot": "COREEDUNORD", "definition": "Le royaume ermite le plus ferm√© du monde" },
                { "mot": "COREEDUSUD", "definition": "Le pays du matin calme et de Samsung" },
                { "mot": "ZIMBABWE", "definition": "Connu pour les chutes Victoria et l'hyperinflation" },
                { "mot": "BOTSWANA", "definition": "Pays des diamants et des √©l√©phants du Kalahari" },
                { "mot": "NAMIBIE", "definition": "L√† o√π le d√©sert rencontre l'oc√©an" },
                { "mot": "TANZANIE", "definition": "Abrite le Kilimandjaro, toit de l'Afrique" },
                { "mot": "OUGANDA", "definition": "La perle de l'Afrique selon Churchill" },
                { "mot": "RWANDA", "definition": "Le pays des mille collines et des gorilles" },
                { "mot": "GHANA", "definition": "La Gold Coast, premi√®re ind√©pendance noire" },
                { "mot": "BENIN", "definition": "Berceau du vaudou" },
                { "mot": "TOGO", "definition": "Petite bande de terre souriante en Afrique de l'Ouest" },
                { "mot": "BURKINAFASO", "definition": "Le pays des hommes int√®gres" },
                { "mot": "GUINEE", "definition": "Le ch√¢teau d'eau de l'Afrique de l'Ouest" },
                { "mot": "LIBERIA", "definition": "Fond√© par des esclaves am√©ricains lib√©r√©s" },
                { "mot": "SIERRALEONE", "definition": "La montagne du lion et ses diamants" },
                { "mot": "MAURITANIE", "definition": "Entre d√©sert et oc√©an, pays des Maures" },
                { "mot": "TCHAD", "definition": "C≈ìur mort de l'Afrique, a un lac qui r√©tr√©cit" },
                { "mot": "SOUDAN", "definition": "A plus de pyramides que l'√âgypte (si, c'est vrai)" },
                { "mot": "ERYTHREE", "definition": "Pays de la mer Rouge, tr√®s ferm√©" },
                { "mot": "DJIBOUTI", "definition": "Petit pays strat√©gique, chaud et militaire" },
                { "mot": "GABON", "definition": "Pays du p√©trole et de la for√™t vierge" },
                { "mot": "CONGO", "definition": "Le petit fr√®re de la RDC, capitale Brazzaville" },
                { "mot": "ANGOLA", "definition": "G√©ant lusophone d'Afrique australe" },
                { "mot": "MOZAMBIQUE", "definition": "C√¥te immense, crevettes et pass√© portugais" },
                { "mot": "ZAMBIE", "definition": "Pays du cuivre et des chutes Victoria (aussi)" },
                { "mot": "MALAWI", "definition": "Le c≈ìur chaud de l'Afrique et son grand lac" },
                { "mot": "MAURICE", "definition": "L'√Æle du Dodo (disparu) et des plages (restantes)" },
                { "mot": "SEYCHELLES", "definition": "Le paradis fiscal aux plages de granit" },
                { "mot": "COMORES", "definition": "Les √Æles de la lune et des parfums" },
                { "mot": "SALVADOR", "definition": "Le petit poucet d'Am√©rique Centrale, terre de volcans" },
                { "mot": "HONDURAS", "definition": "R√©publique banani√®re originelle" },
                { "mot": "NICARAGUA", "definition": "Terre de lacs et de volcans" },
                { "mot": "GUATEMALA", "definition": "C≈ìur du monde Maya" },
                { "mot": "BELIZE", "definition": "Seul pays anglophone d'Am√©rique Centrale" },
                { "mot": "BAHAMAS", "definition": "700 √Æles et des cochons nageurs" },
                { "mot": "REPUBLIQUEDOMINICAINE", "definition": "Partage son √Æle avec Ha√Øti, plages de Punta Cana" },
                { "mot": "TRINITEETTOBAGO", "definition": "Patrie du carnaval et du steel-drum" },
                { "mot": "BARBADE", "definition": "L'√Æle de Rihanna" },
                { "mot": "GUYANA", "definition": "Seul pays anglophone d'Am√©rique du Sud" },
                { "mot": "SURINAME", "definition": "Parle n√©erlandais en Am√©rique du Sud" },
                { "mot": "GUYANE", "definition": "C'est la France en Am√©rique du Sud (fus√©es Ariane)" },
                { "mot": "PAPOUASIE", "definition": "Pays aux 800 langues diff√©rentes" },
                { "mot": "VANUATU", "definition": "√éle du saut √† l'√©lastique traditionnel (liane)" },
                { "mot": "TONGA", "definition": "Le royaume o√π le temps commence" },
                { "mot": "KIRIBATI", "definition": "Pays qui risque de dispara√Ætre sous l'eau" },
                { "mot": "TUVALU", "definition": "Vit de la vente de son nom de domaine .tv" },
                { "mot": "NAURU", "definition": "La plus petite r√©publique, jadis riche de phosphate" },
                { "mot": "PALAOS", "definition": "√éles champignons et lac aux m√©duses" },
                { "mot": "MICRONESIE", "definition": "Des milliers de petites √Æles √©parpill√©es" },
                { "mot": "MARSHALL", "definition": "√éles connues pour les essais nucl√©aires" },
                { "mot": "BENIN", "definition": "Ancien royaume du Dahomey, aujourd'hui petit pays d'Afrique de l'Ouest." },
                { "mot": "GEORGIE", "definition": "Pays du Caucase, autrefois r√©publique de l'Union sovi√©tique." },
                { "mot": "LIECHTENSTEIN", "definition": "Tr√®s petite principaut√© alpine situ√©e entre la Suisse et l'Autriche." },
                { "mot": "ETATSUNIS", "definition": "Grand pays d'Am√©rique du Nord devenu ind√©pendant en 1776." },
                { "mot": "FRANCE", "definition": "Pays d'Europe de l'Ouest marqu√© par la R√©volution de 1789." }
            ],
            "capitales": [
                { "mot": "PARIS", "definition": "Capitale de la France" },
                { "mot": "LONDRES", "definition": "Capitale du Royaume-Uni" },
                { "mot": "BERLIN", "definition": "Capitale de l'Allemagne" },
                { "mot": "MADRID", "definition": "Capitale de l'Espagne" },
                { "mot": "ROME", "definition": "Capitale de l'Italie" },
                { "mot": "LISBONNE", "definition": "Capitale du Portugal" },
                { "mot": "BRUXELLES", "definition": "Capitale de la Belgique" },
                { "mot": "AMSTERDAM", "definition": "Capitale des Pays-Bas" },
                { "mot": "VIENNE", "definition": "Capitale de l'Autriche" },
                { "mot": "BERNE", "definition": "Capitale de la Suisse" },
                { "mot": "ATHENES", "definition": "Capitale de la Gr√®ce" },
                { "mot": "MOSCOU", "definition": "Capitale de la Russie" },
                { "mot": "KIEV", "definition": "Capitale de l'Ukraine" },
                { "mot": "VARSOVIE", "definition": "Capitale de la Pologne" },
                { "mot": "PRAGUE", "definition": "Capitale de la Tch√©quie" },
                { "mot": "BUDAPEST", "definition": "Capitale de la Hongrie" },
                { "mot": "DUBLIN", "definition": "Capitale de l'Irlande" },
                { "mot": "OSLO", "definition": "Capitale de la Norv√®ge" },
                { "mot": "STOCKHOLM", "definition": "Capitale de la Su√®de" },
                { "mot": "COPENHAGUE", "definition": "Capitale du Danemark" },
                { "mot": "HELSINKI", "definition": "Capitale de la Finlande" },
                { "mot": "REYKJAVIK", "definition": "Capitale de l'Islande" },
                { "mot": "WASHINGTON", "definition": "Capitale des √âtats-Unis" },
                { "mot": "OTTAWA", "definition": "Capitale du Canada" },
                { "mot": "MEXICO", "definition": "Capitale du Mexique" },
                { "mot": "BRASILIA", "definition": "Capitale du Br√©sil" },
                { "mot": "BUENOSAIRES", "definition": "Capitale de l'Argentine" },
                { "mot": "SANTIAGO", "definition": "Capitale du Chili" },
                { "mot": "BOGOTA", "definition": "Capitale de la Colombie" },
                { "mot": "LIMA", "definition": "Capitale du P√©rou" },
                { "mot": "CARACAS", "definition": "Capitale du Venezuela" },
                { "mot": "QUITO", "definition": "Capitale de l'√âquateur" },
                { "mot": "LAPAZE", "definition": "Capitale administrative de la Bolivie" },
                { "mot": "SUCRE", "definition": "Capitale constitutionnelle de la Bolivie" },
                { "mot": "MONTEVIDEO", "definition": "Capitale de l'Uruguay" },
                { "mot": "ASUNCION", "definition": "Capitale du Paraguay" },
                { "mot": "LAHAVANE", "definition": "Capitale de Cuba" },
                { "mot": "KINGSTON", "definition": "Capitale de la Jama√Øque" },
                { "mot": "PORTAUPRINCE", "definition": "Capitale d'Ha√Øti" },
                { "mot": "PEKIN", "definition": "Capitale de la Chine" },
                { "mot": "TOKYO", "definition": "Capitale du Japon" },
                { "mot": "SEOUL", "definition": "Capitale de la Cor√©e du Sud" },
                { "mot": "PYONGYANG", "definition": "Capitale de la Cor√©e du Nord" },
                { "mot": "BANGKOK", "definition": "Capitale de la Tha√Ølande" },
                { "mot": "HANOI", "definition": "Capitale du Vietnam" },
                { "mot": "JAKARTA", "definition": "Capitale de l'Indon√©sie" },
                { "mot": "MANILLE", "definition": "Capitale des Philippines" },
                { "mot": "NEWDELHI", "definition": "Capitale de l'Inde" },
                { "mot": "ISLAMABAD", "definition": "Capitale du Pakistan" },
                { "mot": "KABOUL", "definition": "Capitale de l'Afghanistan" },
                { "mot": "TEHERAN", "definition": "Capitale de l'Iran" },
                { "mot": "BAGDAD", "definition": "Capitale de l'Irak" },
                { "mot": "DAMAS", "definition": "Capitale de la Syrie" },
                { "mot": "BEYROUTH", "definition": "Capitale du Liban" },
                { "mot": "AMMAN", "definition": "Capitale de la Jordanie" },
                { "mot": "JERUSALEM", "definition": "Ville sainte et capitale d'Isra√´l" },
                { "mot": "RIYAD", "definition": "Capitale de l'Arabie saoudite" },
                { "mot": "ANKARA", "definition": "Capitale de la Turquie" },
                { "mot": "LECAIRE", "definition": "Capitale de l'√âgypte" },
                { "mot": "RABAT", "definition": "Capitale du Maroc" },
                { "mot": "ALGER", "definition": "Capitale de l'Alg√©rie" },
                { "mot": "TUNIS", "definition": "Capitale de la Tunisie" },
                { "mot": "TRIPOLI", "definition": "Capitale de la Libye" },
                { "mot": "DAKAR", "definition": "Capitale du S√©n√©gal" },
                { "mot": "NAIROBI", "definition": "Capitale du Kenya" },
                { "mot": "ADDISABEBA", "definition": "Capitale de l'√âthiopie" },
                { "mot": "ABUJA", "definition": "Capitale du Nig√©ria" },
                { "mot": "ACCRA", "definition": "Capitale du Ghana" },
                { "mot": "KINSHASA", "definition": "Capitale de la RDC (Congo)" },
                { "mot": "LUANDA", "definition": "Capitale de l'Angola" },
                { "mot": "PRETORIA", "definition": "Capitale administrative de l'Afrique du Sud" },
                { "mot": "CAPETOWN", "definition": "Capitale l√©gislative de l'Afrique du Sud (Le Cap)" },
                { "mot": "ANTANANARIVO", "definition": "Capitale de Madagascar" },
                { "mot": "CANBERRA", "definition": "Capitale de l'Australie" },
                { "mot": "WELLINGTON", "definition": "Capitale de la Nouvelle-Z√©lande" },
                { "mot": "SUVA", "definition": "Capitale des Fidji" },
                { "mot": "BUCAREST", "definition": "Capitale de la Roumanie" },
                { "mot": "SOFIA", "definition": "Capitale de la Bulgarie" },
                { "mot": "BELGRADE", "definition": "Capitale de la Serbie" },
                { "mot": "ZAGREB", "definition": "Capitale de la Croatie" },
                { "mot": "LJUBLJANA", "definition": "Capitale de la Slov√©nie" },
                { "mot": "BRATISLAVA", "definition": "Capitale de la Slovaquie" },
                { "mot": "TIRANA", "definition": "Capitale de l'Albanie" },
                { "mot": "SARAJEVO", "definition": "Capitale de la Bosnie-Herz√©govine" },
                { "mot": "SKOPJE", "definition": "Capitale de la Mac√©doine du Nord" },
                { "mot": "VALETTE", "definition": "Capitale de Malte" },
                { "mot": "NICOSIE", "definition": "Capitale de Chypre" },
                { "mot": "TALLINN", "definition": "Capitale de l'Estonie" },
                { "mot": "RIGA", "definition": "Capitale de la Lettonie" },
                { "mot": "VILNIUS", "definition": "Capitale de la Lituanie" },
                { "mot": "MINSK", "definition": "Capitale de la Bi√©lorussie" },
                { "mot": "CHISINAU", "definition": "Capitale de la Moldavie" },
                { "mot": "EREVAN", "definition": "Capitale de l'Arm√©nie" },
                { "mot": "BAKOU", "definition": "Capitale de l'Azerba√Ødjan" },
                { "mot": "TBILISI", "definition": "Capitale de la G√©orgie" },
                { "mot": "ASTANA", "definition": "Capitale du Kazakhstan" },
                { "mot": "TACHKENT", "definition": "Capitale de l'Ouzb√©kistan" },
                { "mot": "BICHKEK", "definition": "Capitale du Kirghizistan" },
                { "mot": "DOUCHANBE", "definition": "Capitale du Tadjikistan" },
                { "mot": "ACHGABAT", "definition": "Capitale du Turkm√©nistan" },
                { "mot": "OULANBATOR", "definition": "Capitale de la Mongolie" },
                { "mot": "KATMANDOU", "definition": "Capitale du N√©pal" },
                { "mot": "THIMPHOU", "definition": "Capitale du Bhoutan" },
                { "mot": "DHAKA", "definition": "Capitale du Bangladesh" },
                { "mot": "COLOMBO", "definition": "Capitale √©conomique du Sri Lanka" },
                { "mot": "KUALALUMPUR", "definition": "Capitale de la Malaisie" },
                { "mot": "SINGAPOUR", "definition": "Cit√©-√âtat et capitale d'elle-m√™me" },
                { "mot": "PHNOMPENH", "definition": "Capitale du Cambodge" },
                { "mot": "VIENTIANE", "definition": "Capitale du Laos" },
                { "mot": "DOHA", "definition": "Capitale du Qatar" },
                { "mot": "MASCATE", "definition": "Capitale d'Oman" }
            ],
            "objets_et_mesures": [
    {"mot": "COUDEE", "definition": "Mesure utilis√©e pour construire l'arche de No√© (Gen√®se 6:15)"},
    {"mot": "SICLE", "definition": "Abraham pesa 400 pi√®ces de ce poids pour un champ (Gen√®se 23:16)"},
    {"mot": "TALENT", "definition": "Parabole o√π un ma√Ætre confie ses biens (Matthieu 25:15)"},
    {"mot": "DENIER", "definition": "On a montr√© cette pi√®ce √† l'effigie de C√©sar √† J√©sus (Luc 20:24)"},
    {"mot": "DRAP", "definition": "Joseph acheta ce lin fin pour envelopper J√©sus (Marc 15:46)"},
    {"mot": "BAT", "definition": "Salomon donna 20 000 mesures d'huile √† Hiram (2 Chroniques 2:10)"},
    {"mot": "KOR", "definition": "Dette de 100 mesures de bl√© r√©duite √† 80 (Luc 16:7)"},
    {"mot": "EPHAH", "definition": "Unit√© pour mesurer la fleur de farine (L√©vitique 6:20)"},
    {"mot": "HIN", "definition": "Un quart de cette mesure de vin pour l'agneau (Exode 29:40)"},
    {"mot": "OMER", "definition": "Chaque Isra√©lite ramassait cette quantit√© de manne (Exode 16:16)"},
    {"mot": "LOG", "definition": "La plus petite mesure d'huile pour la purification (L√©vitique 14:10)"},
    {"mot": "STADE", "definition": "Emma√ºs √©tait √† 60 de ces unit√©s de J√©rusalem (Luc 24:13)"},
    {"mot": "HARPE", "definition": "David en jouait pour apaiser Sa√ºl (1 Samuel 16:23)"},
    {"mot": "LYRE", "definition": "Instrument pour louer J√©hovah (Psaume 33:2)"},
    {"mot": "TROMPETTE", "definition": "Sept pr√™tres en sonn√®rent devant J√©richo (Josu√© 6:4)"},
    {"mot": "COR", "definition": "Instrument en corne de b√©lier pour le Jubil√© (L√©vitique 25:9)"},
    {"mot": "CHANDELIER", "definition": "En or pur, plac√© dans le Saint (Exode 25:31)"},
    {"mot": "AUTEL", "definition": "No√© en b√¢tit un apr√®s le D√©luge (Gen√®se 8:20)"},
    {"mot": "ENCENSOIR", "definition": "Rempli de braises ardentes par le pr√™tre (L√©vitique 16:12)"},
    {"mot": "OURIM", "definition": "Plac√© dans le pectoral pour le jugement (Exode 28:30)"},
    {"mot": "THOUIMMIM", "definition": "Tir√© au sort avec l'Ourim par Sa√ºl (1 Samuel 14:41)"},
    {"mot": "EPHOD", "definition": "G√©d√©on en fit un qui devint un pi√®ge (Juges 8:27)"},
    {"mot": "PECTORAL", "definition": "Orn√© de quatre rang√©es de pierres (Exode 28:17)"},
    {"mot": "MANTEAU", "definition": "D√©chir√© par Job en signe de deuil (Job 1:20)"},
    {"mot": "SANDALE", "definition": "Mo√Øse dut les √¥ter devant le buisson (Exode 3:5)"},
    {"mot": "BATON", "definition": "A fleurit pour la maison de L√©vi (Nombres 17:8)"},
    {"mot": "FRONDE", "definition": "Arme des 700 gauchers de Benjamin (Juges 20:16)"},
    {"mot": "FILET", "definition": "Les disciples lach√®rent tout pour suivre J√©sus (Marc 1:18)"},
    {"mot": "JOUG", "definition": "Prenez sur vous mon [mot], car il est doux (Matthieu 11:29)"},
    {"mot": "LAMPE", "definition": "Ta parole est une [mot] pour mon pied (Psaume 119:105)"},
    {"mot": "HUILE", "definition": "La veuve n'en avait qu'un peu dans une jarre (1 Rois 17:12)"},
    {"mot": "VIN", "definition": "Paul conseille d'en prendre un peu pour l'estomac (1 Timoth√©e 5:23)"},
    {"mot": "PAIN", "definition": "L'homme ne doit pas vivre de [mot] seulement (Matthieu 4:4)"},
    {"mot": "LEVAIN", "definition": "M√©fiez-vous du [mot] des pharisiens (Luc 12:1)"},
    {"mot": "SEL", "definition": "La femme de Lot devint une colonne de [mot] (Gen√®se 19:26)"},
    {"mot": "MYRRHE", "definition": "Nicod√®me apporta un m√©lange de [mot] et d'alo√®s (Jean 19:39)"},
    {"mot": "OR", "definition": "Le roi Neboukadnetsar fit une statue de ce m√©tal (Daniel 3:1)"},
    {"mot": "ARGENT", "definition": "Joseph fut vendu pour 20 pi√®ces de ce m√©tal (Gen√®se 37:28)"},
    {"mot": "CUIVRE", "definition": "Le serpent br√ªlant fabriqu√© par Mo√Øse (Nombres 21:9)"},
    {"mot": "FER", "definition": "Les chars de Sisera avaient des faux en [mot] (Juges 4:3)"},
    {"mot": "PIERRE", "definition": "J√©sus dit que celles-ci crieraient (Luc 19:40)"},
    {"mot": "ROULEAU", "definition": "J√©sus d√©roula le [mot] du proph√®te Isa√Øe (Luc 4:17)"},
    {"mot": "COUPE", "definition": "J√©sus prit une [mot] apr√®s le repas (Luc 22:20)"},
    {"mot": "BASSIN", "definition": "J√©sus versa de l'eau dedans pour laver les pieds (Jean 13:5)"},
    {"mot": "EPONGE", "definition": "Remplie de vin aigre au bout d'un roseau (Matthieu 27:48)"},
    {"mot": "CLOU", "definition": "Ya√´l enfon√ßa un piquet de tente dans sa tempe (Juges 4:21)"},
    {"mot": "DRACHME", "definition": "Pi√®ce d'argent perdue par une femme (Luc 15:8)"},
    {"mot": "MINE", "definition": "Le noble donna 10 [mot] √† 10 esclaves (Luc 19:13)"},
    {"mot": "AIGUILLON", "definition": "Shamgar tua 600 Philistins avec un [mot] √† bovins (Juges 3:31)"},
    {"mot": "MEULE", "definition": "Une femme lan√ßa une [mot] sur Abim√©lek (Juges 9:53)"},
    {"mot": "CITERNE", "definition": "J√©r√©mie s'enfon√ßa dans la boue de celle-ci (J√©r√©mie 38:6)"},
    {"mot": "TENTE", "definition": "Jael invita Sisera √† entrer dans sa [mot] (Juges 4:18)"},
    {"mot": "ARCHE", "definition": "Les Philistins captur√®rent l'[mot] de Dieu (1 Samuel 4:11)"},
    {"mot": "MANNE", "definition": "Cessa de tomber quand ils mang√®rent du pays (Josu√© 5:12)"},
    {"mot": "BOUCLIER", "definition": "Prenez le grand [mot] de la foi (√âph√©siens 6:16)"},
    {"mot": "EPEE", "definition": "La parole de Dieu est plus tranchante qu'une [mot] (H√©breux 4:12)"},
    {"mot": "CASQUE", "definition": "Acceptez le [mot] du salut (√âph√©siens 6:17)"},
    {"mot": "CEINTURE", "definition": "Jean portait une [mot] de cuir autour des reins (Marc 1:6)"},
    {"mot": "GOURDE", "definition": "Agar partit avec du pain et une [mot] d'eau (Gen√®se 21:14)"},
    {"mot": "RIDEAU", "definition": "Le [mot] du sanctuaire se d√©chira en deux (Matthieu 27:51)"}
]

        };

        /* --- CONFIGURATION --- */
        const DIFFICULTIES = {
            'easy': { label: 'Facile', size: 10, words: 8, multiplier: 0.8 },
            'normal': { label: 'Normal', size: 15, words: 12, multiplier: 1.0 },
            'hard': { label: 'Difficile', size: 18, words: 20, multiplier: 1.5 }
        };

        const COLOR_THEMES = {
            "violet": { primary: "#6366f1", bg: "linear-gradient(135deg, #0f172a 0%, #1e1b4b 100%)", green: "#22c55e" },
            "ocean": { primary: "#0ea5e9", bg: "linear-gradient(135deg, #0c4a6e 0%, #075985 100%)", green: "#4ade80" },
            "nature": { primary: "#10b981", bg: "linear-gradient(135deg, #064e3b 0%, #14532d 100%)", green: "#a3e635" },
            "sunset": { primary: "#f59e0b", bg: "linear-gradient(135deg, #7c2d12 0%, #9a3412 100%)", green: "#fbbf24" },
            "neon": { primary: "#d946ef", bg: "linear-gradient(135deg, #4a044e 0%, #701a75 100%)", green: "#f472b6" }
        };

        const ACHIEVEMENTS = [
            { id: 'baby_steps', tier: 'bronze', icon: 'üê£', title: 'Premiers Pas', desc: 'Gagner 1 partie' },
            { id: 'warm_up', tier: 'bronze', icon: '‚òï', title: '√âchauffement', desc: 'Gagner 5 parties' },
            { id: 'apprentice', tier: 'silver', icon: 'üéì', title: 'Apprenti', desc: 'Gagner 10 parties' },
            { id: 'regular', tier: 'silver', icon: 'üìÖ', title: 'Habitu√©', desc: 'Jouer 3 jours de suite' },
            { id: 'addict', tier: 'gold', icon: 'üî•', title: 'Accro', desc: 'Jouer 7 jours de suite' },
            { id: 'runner', tier: 'bronze', icon: 'üëü', title: 'Coureur', desc: 'Gagner en moins de 3 min' },
            { id: 'sprinter', tier: 'silver', icon: '‚ö°', title: 'Sprinter', desc: 'Gagner en moins de 2 min' },
            { id: 'flash', tier: 'gold', icon: 'üöÄ', title: 'The Flash', desc: 'Gagner en moins de 60 sec' },
            { id: 'light_speed', tier: 'platinum', icon: 'üí´', title: 'Vitesse Lumi√®re', desc: 'Gagner en moins de 30 sec' },
            { id: 'reader', tier: 'bronze', icon: 'üìñ', title: 'Lecteur', desc: 'Trouver 50 mots' },
            { id: 'writer', tier: 'silver', icon: '‚úçÔ∏è', title: '√âcrivain', desc: 'Trouver 100 mots' },
            { id: 'poet', tier: 'gold', icon: 'üìú', title: 'Po√®te', desc: 'Trouver 500 mots' },
            { id: 'dictionary', tier: 'platinum', icon: 'üìö', title: 'Dictionnaire', desc: 'Trouver 1000 mots' },
            { id: 'clean', tier: 'bronze', icon: '‚ú®', title: 'Propre', desc: '1 partie sans indice' },
            { id: 'sharp', tier: 'silver', icon: 'üî™', title: 'Aff√ªt√©', desc: '5 parties sans indice' },
            { id: 'eagle_eye', tier: 'gold', icon: 'üëÅÔ∏è', title: 'Oeil de Lynx', desc: '20 parties sans indice' },
            { id: 'oracle', tier: 'platinum', icon: 'üîÆ', title: 'L\'Oracle', desc: '50 parties sans indice' },
            { id: 'brave', tier: 'bronze', icon: 'üõ°Ô∏è', title: 'Brave', desc: 'Gagner en mode Normal' },
            { id: 'knight', tier: 'silver', icon: '‚öîÔ∏è', title: 'Chevalier', desc: 'Gagner 5 fois en Normal' },
            { id: 'hero', tier: 'gold', icon: 'ü¶Å', title: 'H√©ros', desc: 'Gagner en mode Difficile' },
            { id: 'legend', tier: 'platinum', icon: 'üëë', title: 'L√©gende', desc: 'Gagner 10 fois en Difficile' },
            { id: 'tech_fan', tier: 'bronze', icon: 'üíª', title: 'Geek', desc: 'Finir 3 grilles Tech' },
            { id: 'zoo_keeper', tier: 'bronze', icon: 'ü¶Å', title: 'Gardien de Zoo', desc: 'Finir 3 grilles Animaux' },
            { id: 'traveler', tier: 'bronze', icon: '‚úàÔ∏è', title: 'Voyageur', desc: 'Finir 3 grilles Capitales' },
            { id: 'polymath', tier: 'gold', icon: 'üé®', title: 'Polymath', desc: 'Gagner dans tous les th√®mes' },
            { id: 'level_5', tier: 'bronze', icon: '‚≠ê', title: 'Niveau 5', desc: 'Atteindre le niveau 5' },
            { id: 'level_10', tier: 'silver', icon: 'üåü', title: 'Niveau 10', desc: 'Atteindre le niveau 10' },
            { id: 'level_20', tier: 'gold', icon: 'üí´', title: 'Niveau 20', desc: 'Atteindre le niveau 20' },
            { id: 'night_owl', tier: 'bronze', icon: 'ü¶â', title: 'Oiseau de Nuit', desc: 'Gagner apr√®s 22h' },
            { id: 'early_bird', tier: 'bronze', icon: 'üê¶', title: 'L√®ve-t√¥t', desc: 'Gagner avant 8h' },
            { id: 'marathon', tier: 'gold', icon: 'üèÉ', title: 'Marathonien', desc: 'Jouer 30 jours de suite' },
            { id: 'century', tier: 'platinum', icon: 'üíØ', title: 'Centenaire', desc: 'Jouer 100 parties' }
        ];

        /* --- ETAT DU JEU --- */
        let currentPack = "tech";
        let currentDiff = 'normal';
        let gameState = { grid: [], placed: [], score: 0, penalty: 0, mode: 'random', activeCell: null, currentDirection: 'H' };
        let gameTimerInterval;
        let startTime;
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        /* --- INITIALISATION --- */
        function init() {
            // Chargement des pr√©f√©rences
            const savedTheme = localStorage.getItem('cw_color_theme') || 'violet';
            applyTheme(savedTheme);

            updateXP();
            updateStreakUI();
            initUI();
            setupPhysicalKeyboard();

            checkDailyStatus();

            // Check URL pour grille partag√©e
            const params = new URLSearchParams(window.location.search);
            if (params.has('grid')) {
                try {
                    const json = JSON.parse(decodeURIComponent(escape(atob(params.get('grid')))));
                    startGame('custom', json);
                } catch (e) { console.error(e); }
            }
        }

        function initUI() {
            // Th√®mes Mots
            const themeCont = document.getElementById('themeSelector');
            themeCont.innerHTML = '';
            Object.keys(PACKS).forEach(key => {
                const btn = document.createElement('div');
                btn.className = `theme-chip ${key === currentPack ? 'active' : ''}`;
                btn.innerText = key.charAt(0).toUpperCase() + key.slice(1);
                btn.onclick = () => { currentPack = key; initUI(); };
                themeCont.appendChild(btn);
            });

            // Difficult√©
            const diffCont = document.getElementById('diffSelector');
            diffCont.innerHTML = '';
            Object.keys(DIFFICULTIES).forEach(k => {
                const btn = document.createElement('div');
                btn.className = `diff-btn ${k === currentDiff ? 'active' : ''}`;
                btn.innerText = DIFFICULTIES[k].label;
                btn.onclick = () => { currentDiff = k; initUI(); };
                diffCont.appendChild(btn);
            });

            // Couleurs
            renderColorPicker(localStorage.getItem('cw_color_theme') || 'violet');
            renderKeyboard();
        }

        /* --- GAME ENGINE --- */
        function startGame(mode, data = null, attempts = 0) {
            if (attempts > 20) {
                alert("Impossible de g√©n√©rer une grille valide. Essayez avec plus de mots !");
                goToMenu();
                return;
            }

            gameState.mode = mode;
            gameState.score = 0;
            gameState.penalty = 0;
            gameState.activeCell = null;
            gameState.currentDirection = 'H';

            // Reset UI
            document.getElementById('scoreDisplay').innerText = '0';
            document.getElementById('timerContainer').style.display = 'block';
            document.getElementById('activeClueBar').classList.remove('visible');

            // Config Difficult√©
            const conf = DIFFICULTIES[currentDiff];
            let words = data || [...PACKS[currentPack]];

            // Pr√©paration Mots
            if (mode === 'daily') {
                let allWords = [...PACKS.tech, ...PACKS.capitales, ...PACKS.animaux_bibliques, ...PACKS.lieux_bibliques, ...PACKS.objets_et_mesures, ...PACKS.personnages_bibliques];
                const date = new Date().toISOString().split('T')[0];
                const rng = RNG.create(date + attempts); // Seed stable mais variable par tentative
                words = RNG.shuffle(allWords, rng).slice(0, conf.words + 5);
            } else if (mode === 'random') {
                words = words.sort(() => 0.5 - Math.random()).slice(0, conf.words + 5);
            }

            // Timer
            if (gameTimerInterval) clearInterval(gameTimerInterval);
            startTime = Date.now();
            gameTimerInterval = setInterval(updateTimer, 1000);

            // G√©n√©ration
            if (generateGrid(words, conf.size)) {
                showScreen('screen-game');
                renderGrid();
                renderDefs();
            } else {
                console.log("Retry generation...", attempts);
                startGame(mode, data, attempts + 1);
            }
        }

        function generateGrid(list, size) {
            for (let attempt = 0; attempt < 5; attempt++) {
                gameState.grid = Array(size).fill().map(() => Array(size).fill(null));
                gameState.placed = [];

                let wordPool = JSON.parse(JSON.stringify(list)).sort((a, b) => b.mot.length - a.mot.length);

                // Premier mot au centre
                const first = wordPool[0];
                if (!first) return false;
                placeWordOnGrid(first, Math.floor(size / 2), Math.floor((size - first.mot.length) / 2), 'H');
                wordPool.shift();

                let stuckCount = 0;
                while (wordPool.length > 0 && stuckCount < 50) {
                    let placed = false;
                    for (let i = 0; i < wordPool.length; i++) {
                        const w = wordPool[i];
                        const spots = findIntersections(w.mot, size);
                        if (spots.length > 0) {
                            const spot = spots[Math.floor(Math.random() * spots.length)];
                            placeWordOnGrid(w, spot.row, spot.col, spot.dir);
                            wordPool.splice(i, 1);
                            placed = true;
                            break;
                        }
                    }
                    if (!placed) stuckCount++;
                }
                if (gameState.placed.length >= Math.min(5, list.length)) return true;
            }
            return false;
        }

        function findIntersections(word, size) {
            let spots = [];
            for (let i = 0; i < word.length; i++) {
                const char = word[i];
                for (let r = 0; r < size; r++) {
                    for (let c = 0; c < size; c++) {
                        if (gameState.grid[r][c] === char) {
                            if (isValidPlacement(word, r, c - i, 'H', size)) spots.push({ row: r, col: c - i, dir: 'H' });
                            if (isValidPlacement(word, r - i, c, 'V', size)) spots.push({ row: r - i, col: c, dir: 'V' });
                        }
                    }
                }
            }
            return spots;
        }

        function isValidPlacement(word, row, col, dir, size) {
            if (row < 0 || col < 0) return false;
            if (dir === 'H' && (col + word.length > size)) return false;
            if (dir === 'V' && (row + word.length > size)) return false;

            // V√©rif Voisins (Isolation)
            if (dir === 'H') {
                if (col > 0 && gameState.grid[row][col - 1] !== null) return false;
                if (col + word.length < size && gameState.grid[row][col + word.length] !== null) return false;
            } else {
                if (row > 0 && gameState.grid[row - 1][col] !== null) return false;
                if (row + word.length < size && gameState.grid[row + word.length][col] !== null) return false;
            }

            for (let i = 0; i < word.length; i++) {
                const r = dir === 'H' ? row : row + i;
                const c = dir === 'H' ? col + i : col;
                const cell = gameState.grid[r][c];

                if (cell !== null && cell !== word[i]) return false; // Collision

                // Si case vide, v√©rifier qu'on ne colle pas d'autres mots lat√©ralement
                if (cell === null) {
                    if (dir === 'H') {
                        if (r > 0 && gameState.grid[r - 1][c] !== null) return false;
                        if (r < size - 1 && gameState.grid[r + 1][c] !== null) return false;
                    } else {
                        if (c > 0 && gameState.grid[r][c - 1] !== null) return false;
                        if (c < size - 1 && gameState.grid[r][c + 1] !== null) return false;
                    }
                }
            }
            return true;
        }

        function placeWordOnGrid(wordObj, row, col, dir) {
            for (let i = 0; i < wordObj.mot.length; i++) {
                const r = dir === 'H' ? row : row + i;
                const c = dir === 'H' ? col + i : col;
                gameState.grid[r][c] = wordObj.mot[i];
            }
            gameState.placed.push({ ...wordObj, r: row, c: col, dir, num: gameState.placed.length + 1 });
        }

        /* --- RENDERING --- */
        function renderGrid() {
            const container = document.getElementById('gameGrid');
            const gridSize = DIFFICULTIES[currentDiff].size;
            container.style.gridTemplateColumns = `repeat(${gridSize}, 1fr)`;
            container.innerHTML = '';

            for (let r = 0; r < gridSize; r++) {
                for (let c = 0; c < gridSize; c++) {
                    const letter = gameState.grid[r][c];
                    const div = document.createElement('div');
                    div.className = letter ? 'cell-container' : 'cell-container blocked';

                    if (letter) {
                        // Num√©ro (Si n'importe quel mot commence ici)
                        const startWord = gameState.placed.find(w => w.r === r && w.c === c);
                        if (startWord) {
                            const num = document.createElement('span');
                            num.className = 'cell-number';
                            num.innerText = startWord.num;
                            div.appendChild(num);
                        }

                        const input = document.createElement('input');
                        input.className = 'cell';
                        input.readOnly = true; // Mobile Friendly
                        input.dataset.ans = letter;
                        input.dataset.r = r;
                        input.dataset.c = c;

                        input.onclick = () => {
                            if (gameState.activeCell === input) {
                                gameState.currentDirection = gameState.currentDirection === 'H' ? 'V' : 'H';
                            } else {
                                // Smart Direction
                                const isH = gameState.placed.some(w => w.dir === 'H' && w.r === r && c >= w.c && c < w.c + w.mot.length);
                                const isV = gameState.placed.some(w => w.dir === 'V' && w.c === c && r >= w.r && r < w.r + w.mot.length);
                                if (isH && !isV) gameState.currentDirection = 'H';
                                else if (!isH && isV) gameState.currentDirection = 'V';
                            }
                            setActive(input);
                        };
                        div.appendChild(input);
                    }
                    container.appendChild(div);
                }
            }
        }

        function setActive(input) {
            if (gameState.activeCell) gameState.activeCell.style.backgroundColor = '';
            gameState.activeCell = input;
            input.style.backgroundColor = '#bfdbfe';

            // Trouver le mot actif
            const r = parseInt(input.dataset.r);
            const c = parseInt(input.dataset.c);
            const activeWord = gameState.placed.find(w => {
                if (gameState.currentDirection === 'H') return w.dir === 'H' && w.r === r && c >= w.c && c < w.c + w.mot.length;
                else return w.dir === 'V' && w.c === c && r >= w.r && r < w.r + w.mot.length;
            });

            // Sticky Clue Bar
            const clueBar = document.getElementById('activeClueBar');
            if (activeWord) {
                clueBar.classList.add('visible');
                document.getElementById('activeClueText').innerHTML = `<strong>${activeWord.num}.</strong> ${activeWord.definition}`;
                switchTab(gameState.currentDirection === 'H' ? 'horizontal' : 'vertical');
                highlightDef(activeWord);
            } else {
                clueBar.classList.remove('visible');
            }
        }

        function renderDefs() { switchTab('horizontal'); }

        function switchTab(dir) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            const idx = dir === 'horizontal' ? 0 : 1;
            document.querySelectorAll('.tab')[idx].classList.add('active');

            const list = document.getElementById('defList');
            list.innerHTML = '';
            const code = dir === 'horizontal' ? 'H' : 'V';

            gameState.placed.filter(w => w.dir === code).sort((a, b) => a.num - b.num).forEach(w => {
                const div = document.createElement('div');
                div.className = 'def-item';
                div.id = `def-${w.num}-${w.dir}`;
                div.innerHTML = `<strong>${w.num}.</strong> ${w.definition}`;
                div.onclick = () => {
                    gameState.currentDirection = w.dir;
                    const cell = document.querySelector(`.cell[data-r="${w.r}"][data-c="${w.c}"]`);
                    if (cell) setActive(cell);
                };
                list.appendChild(div);
            });
        }

        function highlightDef(w) {
            document.querySelectorAll('.def-item').forEach(d => d.classList.remove('highlight'));
            const el = document.getElementById(`def-${w.num}-${w.dir}`);
            if (el) {
                el.classList.add('highlight');
                // Sur PC seulement, on scroll la liste
                if (window.innerWidth > 900) el.scrollIntoView({ behavior: "smooth", block: "nearest" });
            }
        }

        /* --- INPUT HANDLING --- */
        function renderKeyboard() {
            const kb = document.getElementById('virtual-keyboard');
            kb.innerHTML = '';
            const rows = [['A', 'Z', 'E', 'R', 'T', 'Y', 'U', 'I', 'O', 'P'], ['Q', 'S', 'D', 'F', 'G', 'H', 'J', 'K', 'L', 'M'], ['‚å´', 'W', 'X', 'C', 'V', 'B', 'N', 'OK']];
            rows.forEach(row => {
                const rDiv = document.createElement('div');
                rDiv.className = 'kb-row';
                row.forEach(k => {
                    const btn = document.createElement('button');
                    btn.className = `kb-key ${k.length > 1 ? 'wide' : ''}`;
                    btn.innerText = k;
                    btn.onclick = (e) => { e.stopPropagation(); handleKey(k); };
                    rDiv.appendChild(btn);
                });
                kb.appendChild(rDiv);
            });
        }

        function setupPhysicalKeyboard() {
            document.addEventListener('keydown', (e) => {
                if (!document.getElementById('screen-game').classList.contains('active')) return;
                const k = e.key.toUpperCase();
                if (/^[A-Z]$/.test(k)) handleKey(k);
                if (e.key === 'Backspace') handleKey('‚å´');
                if (e.key === 'Enter') checkWin();
                if (['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'].includes(e.key)) {
                    e.preventDefault(); handleArrow(e.key);
                }
            });
        }

        function handleArrow(key) {
            if (!gameState.activeCell) return;
            const r = parseInt(gameState.activeCell.dataset.r);
            const c = parseInt(gameState.activeCell.dataset.c);
            let next = null;
            if (key === 'ArrowUp') { next = getCell(r - 1, c); gameState.currentDirection = 'V'; }
            if (key === 'ArrowDown') { next = getCell(r + 1, c); gameState.currentDirection = 'V'; }
            if (key === 'ArrowLeft') { next = getCell(r, c - 1); gameState.currentDirection = 'H'; }
            if (key === 'ArrowRight') { next = getCell(r, c + 1); gameState.currentDirection = 'H'; }
            if (next) setActive(next);
        }

        function getCell(r, c) { return document.querySelector(`.cell[data-r="${r}"][data-c="${c}"]`); }

        function handleKey(k) {
            if (!gameState.activeCell) return;
            const cur = gameState.activeCell;

            // Bloquer si mot valid√© (sauf OK)
            if (cur.classList.contains('correct') && k !== 'OK') {
                // On avance juste
                moveCursor(1); return;
            }

            if (k === 'OK') { checkWin(); return; }
            if (k === '‚å´') {
                if (cur.value === '') moveCursor(-1);
                else { cur.value = ''; cur.classList.remove('incorrect'); }
                playSound('tap');
                return;
            }

            playSound('tap');
            cur.value = k;
            cur.classList.remove('incorrect');
            checkCompletedWords();
            moveCursor(1);
        }

        function moveCursor(dir) {
            const r = parseInt(gameState.activeCell.dataset.r);
            const c = parseInt(gameState.activeCell.dataset.c);
            const nextR = gameState.currentDirection === 'H' ? r : r + dir;
            const nextC = gameState.currentDirection === 'H' ? c + dir : c;
            const next = getCell(nextR, nextC);
            if (next) setActive(next);
            else checkWin(); // Fin de mot/grille
        }

        function useHint() {
            if (gameState.score < 50 && gameState.score > -200) {
                if (!confirm("Co√ªt: 50 points. Continuer ?")) return;
            }

            const candidates = Array.from(document.querySelectorAll('.cell')).filter(c => c.value === '' || c.value !== c.dataset.ans);
            if (candidates.length === 0) return;

            const cell = candidates[Math.floor(Math.random() * candidates.length)];
            cell.value = cell.dataset.ans;
            cell.classList.add('correct');
            cell.style.color = 'var(--primary)';

            gameState.penalty += 50;
            checkWin();
            playSound('tap');
        }

        function checkCompletedWords() {
            gameState.placed.forEach(w => {
                let cells = [];
                let isComplete = true;
                for (let i = 0; i < w.mot.length; i++) {
                    const r = w.dir === 'H' ? w.r : w.r + i;
                    const c = w.dir === 'H' ? w.c + i : w.c;
                    const cell = getCell(r, c);
                    if (!cell || cell.value !== w.mot[i]) isComplete = false;
                    cells.push(cell);
                }
                if (isComplete) {
                    const alreadyDone = cells[0].classList.contains('word-completed');
                    if (!alreadyDone) {
                        cells.forEach(c => {
                            c.classList.add('word-completed');
                            c.classList.add('correct');
                            c.readOnly = true;
                        });
                        const defEl = document.getElementById(`def-${w.num}-${w.dir}`);
                        if (defEl) defEl.style.textDecoration = "line-through";
                        playSound('success');
                    }
                }
            });
        }

        function checkWin() {
            const cells = document.querySelectorAll('.cell');
            let correct = 0;
            cells.forEach(c => {
                if (c.value === c.dataset.ans) correct++;
                else if (c.value) c.classList.add('incorrect');
            });

            gameState.score = (correct * 10) - gameState.penalty;
            document.getElementById('scoreDisplay').innerText = gameState.score;

            if (correct === cells.length) {
                clearInterval(gameTimerInterval);
                playSound('win');
                confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });

                const duration = Math.floor((Date.now() - startTime) / 1000);
                updateStats({ time: duration, wordCount: gameState.placed.length, penalty: gameState.penalty });

                // Gain XP (Min 10)
                const diffMult = DIFFICULTIES[currentDiff].multiplier;
                const xpGain = Math.floor(Math.max(10, gameState.score) * diffMult);

                const curXP = parseInt(localStorage.getItem('cw_xp') || 0);
                localStorage.setItem('cw_xp', curXP + xpGain);
                updateXP();

                if (gameState.mode === 'daily') updateStreakLogic();

                document.getElementById('finalScore').innerText = "+" + xpGain + " XP";
                document.getElementById('victoryModal').style.display = 'flex';
            }
        }

        /* --- UTILS & SYSTEM --- */
        function updateTimer() {
            const diff = Math.floor((Date.now() - startTime) / 1000);
            const m = Math.floor(diff / 60).toString().padStart(2, '0');
            const s = (diff % 60).toString().padStart(2, '0');
            document.getElementById('timerDisplay').innerText = `${m}:${s}`;
        }

        function updateXP() {
            const xp = parseInt(localStorage.getItem('cw_xp') || 0);
            let lvl = Math.floor(Math.sqrt(xp / 500)) + 1;

            const start = Math.pow(lvl - 1, 2) * 500;
            const end = Math.pow(lvl, 2) * 500;
            const prog = ((xp - start) / (end - start)) * 100;

            document.getElementById('lvlDisplay').innerText = lvl;
            document.getElementById('xpFill').style.width = Math.max(0, Math.min(100, prog)) + '%';
            document.getElementById('xpText').innerHTML = `${xp - start} / ${end - start}`;
        }

        function updateStreakLogic() {
            try {
                const now = new Date();
                const offset = now.getTimezoneOffset() * 60000;
                const today = new Date(now.getTime() - offset).toISOString().split('T')[0];

                const last = localStorage.getItem('cw_last');
                let streak = parseInt(localStorage.getItem('cw_streak') || 0);

                const yesterdayDate = new Date(now); yesterdayDate.setDate(yesterdayDate.getDate() - 1);
                const yesterday = new Date(yesterdayDate.getTime() - offset).toISOString().split('T')[0];

                if (last !== today) {
                    if (last === yesterday) streak++;
                    else streak = 1;
                    localStorage.setItem('cw_streak', streak);
                    localStorage.setItem('cw_last', today);
                    document.getElementById('streakBonus').innerText = `üî• S√©rie : ${streak} jours !`;
                } else {
                    document.getElementById('streakBonus').innerText = `üî• S√©rie maintenue !`;
                }
                updateStreakUI();
                checkDailyStatus();
            } catch (e) { }
        }
        function updateStreakUI() { document.getElementById('streakDisplay').innerText = localStorage.getItem('cw_streak') || 0; }

        /* --- STATS & PROFILE --- */
        function updateStats(winData) {
            let stats = JSON.parse(localStorage.getItem('cw_stats')) || { unlockedAch: [], counters: {}, fastestWin: null };
            if (!stats.counters) stats.counters = {};
            const c = stats.counters;

            // Mise √† jour des compteurs basiques
            c.totalGames = (c.totalGames || 0) + 1;
            c.totalWords = (c.totalWords || 0) + winData.wordCount;
            if (winData.penalty === 0) c.perfectGames = (c.perfectGames || 0) + 1;

            // --- CORRECTION RECORD DE TEMPS ---
            // Si fastestWin est null OU si le nouveau temps est meilleur (plus petit)
            if (stats.fastestWin === null || stats.fastestWin === undefined || winData.time < stats.fastestWin) {
                stats.fastestWin = winData.time;
                console.log("Nouveau record enregistr√© :", stats.fastestWin);
            }

            // Check Achievements (Succ√®s)
            const unlock = (id) => {
                if (!stats.unlockedAch.includes(id)) {
                    stats.unlockedAch.push(id);
                    showToast(ACHIEVEMENTS.find(a => a.id === id));
                }
            };

            if (c.totalGames >= 1) unlock('baby_steps');
            if (c.totalGames >= 5) unlock('warm_up');
            if (winData.time < 60) unlock('flash');
            if (c.totalWords >= 50) unlock('reader');
            if (winData.penalty === 0) unlock('clean');

            localStorage.setItem('cw_stats', JSON.stringify(stats));
        }

        /* --- CORRECTION AFFICHAGE PROFIL --- */
        function showProfile() {
            const stats = JSON.parse(localStorage.getItem('cw_stats')) || { unlockedAch: [], counters: {}, fastestWin: null };
            const c = stats.counters || {};

            document.getElementById('statGames').innerText = c.totalGames || 0;
            document.getElementById('statWords').innerText = c.totalWords || 0;
            document.getElementById('statPerfect').innerText = c.perfectGames || 0;

            // Formatage du temps (ex: 65s -> 1m 05s)
            const elTime = document.getElementById('statBestTime');
            if (stats.fastestWin !== null && stats.fastestWin !== undefined) {
                const m = Math.floor(stats.fastestWin / 60);
                const s = (stats.fastestWin % 60).toString().padStart(2, '0');
                elTime.innerText = `${m}m ${s}s`;
            } else {
                elTime.innerText = '-';
            }

            // ... (Reste du code pour la liste des succ√®s identique) ...
            const list = document.getElementById('achievementsList');
            list.innerHTML = '';
            const sorted = [...ACHIEVEMENTS].sort((a, b) => {
                const hasA = stats.unlockedAch.includes(a.id);
                const hasB = stats.unlockedAch.includes(b.id);
                return hasA === hasB ? 0 : hasA ? -1 : 1;
            });

            sorted.forEach(ach => {
                const unlocked = stats.unlockedAch.includes(ach.id);
                const card = document.createElement('div');
                card.className = `achievement-card ${unlocked ? 'unlocked' : ''}`;
                card.dataset.tier = ach.tier;
                card.innerHTML = `<div class="ach-icon">${ach.icon}</div><div class="ach-info"><h4>${ach.title}</h4><p>${ach.desc}</p></div>${unlocked ? '<div style="margin-left:auto; font-weight:bold;">‚úì</div>' : ''}`;
                list.appendChild(card);
            });
            showScreen('screen-profile');
        }

        /* --- THEMES & EXPORT --- */
        function applyTheme(name) {
            const t = COLOR_THEMES[name];
            const r = document.documentElement;
            r.style.setProperty('--primary', t.primary);
            r.style.setProperty('--bg-gradient', t.bg);
            r.style.setProperty('--green', t.green);
            localStorage.setItem('cw_color_theme', name);
        }
        function renderColorPicker(active) {
            const c = document.getElementById('themeContainer');
            c.innerHTML = '';
            Object.keys(COLOR_THEMES).forEach(k => {
                const d = document.createElement('div');
                d.className = `theme-dot ${k === active ? 'active' : ''}`;
                d.style.background = COLOR_THEMES[k].primary;
                d.onclick = () => { applyTheme(k); renderColorPicker(k); };
                c.appendChild(d);
            });
        }

        function exportProfile() {
            const data = { xp: localStorage.getItem('cw_xp'), stats: localStorage.getItem('cw_stats'), streak: localStorage.getItem('cw_streak'), theme: localStorage.getItem('cw_color_theme'), app: 'CrossWordGen' };
            const blob = new Blob([JSON.stringify(data)], { type: 'application/json' });
            const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'cw_backup.json';
            a.click();
        }
        function importProfile(inp) {
            const f = inp.files[0];
            if (!f) return;
            const r = new FileReader();
            r.onload = (e) => {
                try {
                    const d = JSON.parse(e.target.result);
                    if (d.app !== 'CrossWordGen') throw new Error();
                    if (!confirm('√âcraser votre profil ?')) return;
                    localStorage.setItem('cw_xp', d.xp || 0);
                    localStorage.setItem('cw_stats', d.stats || '{}');
                    localStorage.setItem('cw_streak', d.streak || 0);
                    localStorage.setItem('cw_color_theme', d.theme || 'violet');
                    location.reload();
                } catch (err) { alert('Fichier invalide'); }
            };
            r.readAsText(f);
        }
        function resetProfile() {
            if (confirm('Tout effacer ? (Irr√©versible)')) {
                localStorage.clear(); location.reload();
            }
        }

        /* --- NAVIGATION --- */
        function showScreen(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }
        function goToMenu() {
            showScreen('screen-menu');
            document.getElementById('timerContainer').style.display = 'none';
            document.getElementById('activeClueBar').classList.remove('visible');
        }
        function showAdmin() { showScreen('screen-admin'); }
        function closeModal() { document.getElementById('victoryModal').style.display = 'none'; goToMenu(); }

        function showToast(ach) {
            const c = document.getElementById('toastContainer');
            const t = document.createElement('div'); t.className = 'toast';
            t.innerHTML = `<div style="font-size:2rem">${ach.icon}</div><div><div style="color:var(--green);font-weight:bold;">Succ√®s !</div><div>${ach.title}</div></div>`;
            c.appendChild(t); playSound('success');
        }

        function playSound(t) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const o = audioCtx.createOscillator(), g = audioCtx.createGain();
            o.connect(g); g.connect(audioCtx.destination);
            if (t === 'tap') { o.frequency.setValueAtTime(600, audioCtx.currentTime); g.gain.setValueAtTime(0.05, audioCtx.currentTime); o.start(); o.stop(audioCtx.currentTime + 0.05); }
            else { o.frequency.setValueAtTime(440, audioCtx.currentTime); o.frequency.linearRampToValueAtTime(880, audioCtx.currentTime + 0.2); g.gain.setValueAtTime(0.1, audioCtx.currentTime); g.gain.linearRampToValueAtTime(0, audioCtx.currentTime + 0.3); o.start(); o.stop(audioCtx.currentTime + 0.3); }
        }

        const RNG = { create: function (s) { let h = 1779033703; for (let i = 0; i < s.length; i++)h = Math.imul(h ^ s.charCodeAt(i), 597399067); return function () { h = Math.imul(h ^ h >>> 9, 2716044179); return (h >>> 0) / 4294967296 } }, shuffle: function (a, r) { let c = a.length; while (c != 0) { let i = Math.floor(r() * c); c--;[a[c], a[i]] = [a[i], a[c]] } return a } };

        function checkDailyStatus() {
            const btn = document.getElementById('btn-daily');
            if (!btn) return;

            // 1. R√©cup√©rer la date du jour (M√™me logique que le Streak pour √™tre coh√©rent)
            const now = new Date();
            const offset = now.getTimezoneOffset() * 60000;
            const today = new Date(now.getTime() - offset).toISOString().split('T')[0];

            // 2. R√©cup√©rer la date de derni√®re partie jou√©e
            const last = localStorage.getItem('cw_last');

            // 3. Si √ßa correspond, on change le style
            if (last === today) {
                btn.classList.add('completed');
                // On change aussi le contenu pour √™tre clair
                btn.innerHTML = `
                <span class="menu-icon">‚úÖ</span>
                <div>
                    <h3>D√©fi du Jour</h3>
                    <small>Termin√© ! √Ä demain.</small>
                </div>
            `;
                // Optionnel : Retirer le onclick si tu veux emp√™cher de rejouer
                btn.onclick = null;
            }
        }

        // START
        init();

    </script>



</body>

</html>